(function(c){var a=navigator.userAgent.toLowerCase(),b=Object.prototype.toString,d=/opera/.test(a),e=/\bchrome\b/.test(a),f=/webkit/.test(a),g=!e&&/safari/.test(a),h=!d&&/msie/.test(a),j=!!document.createElement("canvas").getContext,k=!f&&/gecko/.test(a),m=/ipod|ipad|iphone|android/gi.test(a),n=function(a,b,c,d){return c*a/d+b},p={easeIn:function(a,b,c,d){return c*(a/=d)*a*a+b},easeOut:function(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b},easeInOut:function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b}},a=function(a){var c=!1,v=!1,s=[],w=function(){if(document.addEventListener)return function(){document.removeEventListener("DOMContentLoaded",w,!1);t()};if(document.attachEvent)return function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",w),t())}}(),i=function(){if(!c){try{document.documentElement.doScroll("left")}catch(a){setTimeout(i,1);return}t()}},t=function(){if(!c){c=!0;for(var a=0;a<s.length;a++)s[a].call(document);s=[]}},x=function(){if(!v){v=!0;if("complete"===document.readyState)return setTimeout(t,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",w,!1),a.addEventListener("load",t,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",w);a.attachEvent("onload",t);var b=!1;try{b=null==a.frameElement}catch(c){}document.documentElement.doScroll&&b&&i()}}},u=function(a){x();c?a.call(document,q):s.push(function(){return a.call(this)})},q=function(a){if(!a||a.nodeType)return a;if("string"===typeof a)return-1!=a.indexOf("#")&&(a=a.substring(1)),document.getElementById(a);"function"===typeof a&&u(a)};q.apply=function(a,i){if(a&&i&&"object"==typeof i)for(var b in i)"undefined"!=typeof i[b]&&(a[b]=i[b]);if(!i&&a){var c={};for(b in a)c[b]=a[b];return c}return a};q.apply(q,{version:"1.2.1",isEmpty:function(a,i){return null===a||void 0===a||q.isArray(a)&&!a.length||(!i?""===a:!1)},isArray:function(a){return"[object Array]"===b.apply(a)},isObject:function(a){return!!a&&"[object Object]"===b.apply(a)},isFunction:function(a){return"[object Function]"===b.apply(a)},isNumber:function(a){return"number"===typeof a&&isFinite(a)},isString:function(a){return"string"===typeof a},isFalse:function(a){return"boolean"===typeof a&&!a},isDefined:function(a){return"undefined"!==typeof a},each:function(a,i,b,c){for(var d=a.length,e=0;e<d;e++)if(c&&q.isArray(a[e]))q.each(a[e],i,b,c);else if(q.isFalse(i.call(b||a,a[e],e)))break},eachAll:function(a,i,b){q.each(a,i,b,!0)},sor:function(a,i){for(var b=a.length-1,c,d=0;d<b;d++)for(var e=b;e>d;e--)if(i?!i(a[e],a[e-1]):a[e]<a[e-1])c=a[e],a[e]=a[e-1],a[e-1]=c}});q.applyIf=function(a,i){if(a&&q.isObject(i))for(var b in i)q.isDefined(i[b])&&!q.isDefined(a[b])&&(a[b]=i[b]);return!i&&a?q.apply(a):a};q.merge=function(a,i,b,c){if(a&&q.isObject(i)){for(var d in i)q.isDefined(i[d])&&(q.isObject(i[d])?q.isObject(a[d])?q.merge(a[d],i[d]):a[d]=q.clone(i[d],!0):a[d]=i[d]);return q.merge(a,b,c)}return a};q.clone=function(a,i,b){var c={};if(q.isArray(a)&&q.isObject(i))for(var d=0;d<a.length;d++)c[a[d]]=b&&q.isObject(i[a[d]])?q.clone(i[a[d]],b):i[a[d]];else if(q.isObject(a))for(d in a)c[d]=i&&q.isObject(a[d])&&!a[d].ICHARTJS_OBJECT?q.clone(a[d],i):a[d];return c};q.override=function(a,i){if(a&&i){var b=a.prototype;q.apply(b,i);q.isIE&&i.hasOwnProperty("toString")&&(b.toString=i.toString)}};q.extend=function(){var a=function(a){for(var i in a)this[i]=a[i]},i=Object.prototype.constructor;return function(b,c){var d=function(){b.apply(this,arguments)},e=function(){},t=b.prototype;e.prototype=t;e=d.prototype=new e;e.constructor=d;d.superclass=t;t.constructor==i&&(t.constructor=b);d.override=function(a){q.override(d,a)};e.superclass=e.supr=function(){return t};e.override=a;q.override(d,c);d.extend=function(a){return q.extend(d,a)};d.plugin_={};d.plugin=function(a,i){q.isString(a)&&q.isFunction(i)&&(d.plugin_[a]=i)};return d}}();var E=Math.sin,H=Math.cos,O=Math.atan,P=Math.sqrt,o=Math.abs,z=Math.PI,y=2*z,Q=Math.ceil,C=Math.round,D=Math.floor,I=Math.max,J=Math.min,A=parseFloat,B={},F={},K=function(a,i){if(0==a)return a;var b=o(a),c=0.1;if(1<b){for(;1<b;)b/=10,c*=10;return D(a/c+i)*c}for(c=1;1>b;)b*=10,c*=10;return C(a*c+i)/c},L=function(a){var i=/rgb\((\w*),(\w*),(\w*)\)/.exec(a);if(i)return[i[1],i[2],i[3]];if(i=/rgba\((\w*),(\w*),(\w*),(.*)\)/.exec(a))return[i[1],i[2],i[3],i[4]];throw Error("invalid colors value '"+a+"'");},G=function(a){if(!a)return a;a=a.replace(/\s/g,"").toLowerCase();if(/^rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)$/.exec(a)||/^rgba\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(0(\.\d*)?|1(\.0)?)\)$/.exec(a))return a;if(/^#(([a-fA-F0-9]{6,7})|([a-fA-F0-9]{3}))$/.exec(a))return a=a.replace(/#/g,"").replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"),(7==a.length?"rgba(":"rgb(")+parseInt(a.substring(0,2),16)+","+parseInt(a.substring(2,4),16)+","+parseInt(a.substring(4,6),16)+(7==a.length?",0."+a.substring(6,7)+")":")");throw Error("invalid colors value '"+a+"'");},M=function(a,i){i=i||0.14;return 0.5<a?i-(1-a)/10:0.1<a?i-0.16+a/5:a>i?i:a/2},N=function(a,i,b,c){if(!i)return i;var i=L(G(i)),d;d=i;var e=void 0,t=void 0;q.isArray(d)&&(e=d[1],t=d[2],d=d[0]);d/=255;var e=e/255,t=t/255,f=I(I(d,e),t),x=J(J(d,e),t),x=f-x;if(0==x)d=[0,0,f];else{var u;d==f?u=(e-t)/x:e==f?u=(t-d)/x+2:t==f&&(u=(d-e)/x+4);u*=60;0>u&&(u+=360);d=[u,x/f,f]}d[1]-=0!=c?c||0.05:c;a?(d[2]-=M(d[2],b),d[1]=q.upTo(d[1],1),d[2]=q.lowTo(d[2],0)):(d[2]+=M(1-d[2],b),d[1]=q.lowTo(d[1],0),d[2]=q.upTo(d[2],1));c=i[3];a=i=void 0;q.isArray(d)&&(a=c,c=d[1],i=d[2],d=d[0]);var g,h,j,b=D(d/60)%6,t=d/60-b;d=i*(1-c);e=i*(1-c*t);c=i*(1-c*(1-t));switch(b){case 0:g=i;h=c;j=d;break;case 1:g=e;h=i;j=d;break;case 2:g=d;h=i;j=c;break;case 3:g=d;h=e;j=i;break;case 4:g=c;h=d;j=i;break;case 5:g=i,h=d,j=e}return"rgb"+(a?"a":"")+"("+C(255*g)+","+C(255*h)+","+C(255*j)+(a?","+a+")":")")};q.apply(q,{getFont:function(a,i,b,d){return a+" "+i+(d||"px")+" "+b},getDoc:function(){return a.contentWindow?a.contentWindow.document:a.contentDocument?a.contentDocument:a.document},_Abstract:function(a,i){if(!i[a])throw Error("You must implements method '"+a+"' in "+i.type);},getAA:function(a){return"linear"==a?n:"easeInOut"==a||"easeIn"==a||"easeOut"==a?p[a]:n},noConflict:function(){return q},plugin:function(a,i,b){q.isFunction(a)&&a.plugin(i,b)},parsePadding:function(a,i){a=a||0;if(q.isNumber(a))return[a,a,a,a];if(q.isArray(a))return a;i=i||0;a=a.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g,/\s/).replace(/\s/g,",").split(",");1==a.length?a[0]=a[1]=a[2]=a[3]=A(a[0])||i:2==a.length?(a[0]=a[2]=A(a[0])||i,a[1]=a[3]=A(a[1])||i):3==a.length?(a[0]=A(a[0])||i,a[1]=a[3]=A(a[1])||i,a[2]=A(a[2])||i):(a[0]=A(a[0])||i,a[1]=A(a[1])||i,a[2]=A(a[2])||i,a[3]=A(a[3])||i);return a},distanceP2P:function(a,i,b,d){return P((b-a)*(b-a)+(d-i)*(d-i))},atan2Radian:function(a,i,b,d){if(a==b)return d>i?z/2:3*z/2;if(i==d)return b>a?0:z;var c=q.quadrant(a,i,b,d),a=O(o((i-d)/(a-b)));return c?(3==c?y:z)+(2==c?a:-a):a},angle2Radian:function(a){return a*z/180},radian2Angle:function(a){return 180*a/z},quadrant:function(a,i,b,d){return a<b?i<d?0:3:i<d?1:2},toPI2:function(a){for(;0>a;)a+=y;return a},visible:function(a,i,b){if(a>=i)return[];var d=q.quadrantd(a),c=q.quadrantd(i);if((2==d||3==d)&&(2==c||3==c)&&i-a<z)return[];a=q.toPI2(a);i=q.toPI2(i);i<=a&&(i+=y);if(a>z)a=y;else{if(i>y)return[{s:a,e:z,f:b},{s:y,e:i,f:b}];i>z&&(i=z)}return{s:a,e:i,f:b}},quadrantd:function(a){if(0==a)return 0;if(0==a%y)return 3;for(;0>a;)a+=y;return Q(2*(a%y)/z)-1},upTo:function(a,i){return i>a?a:i},lowTo:function(a,i){return i<a?a:i},between:function(a,i,b){return a>i?q.between(i,a,b):b>i?i:b<a?a:b},inRange:function(a,i,b){return i>b&&a<b},angleInRange:function(a,i,b){b-=a;b=0>b?b+y:b;b%=y;return i-a>b},angleZInRange:function(a,i,b){return i<a?b>a||b<i:i>b&&a<b},inRangeClosed:function(a,i,b){return i>=b&&a<=b},inEllipse:function(a,i,b,d){return 1>=a*a/b/b+i*i/d/d},p2Point:function(a,i,b,d){return{x:a+H(b)*d,y:i+E(b)*d}},toRgb:G,toRgba:function(a,i){var b=L(G(a));return"rgba("+b[0]+","+b[1]+","+b[2]+","+i+")"},vectorP2P:function(a,i,b){b||(i=q.angle2Radian(i),a=q.angle2Radian(a));i=E(i);return{x:i*E(a),y:i*H(a)}},uid:function(){var a=function(){return D(65536*(1+Math.random())).toString(16).substring(1)};return function(i){return(i||"ijs")+"_"+a()+a()+a()}}(),register:function(a){if(q.isString(a))F[a.toLowerCase()]=a;else{var i=a.get("id");if(!i||""==i)i=a.push("id",q.uid(a.type));if(B[i])throw Error("Exist Reduplicate id :"+i);a.id=i;B[i]=a}},create:function(a){if(!a.type||!F[a.type])throw Error("TypeNotFoundException["+a.type+"]");return new q[F[a.type]](a)},remove:function(a){B[a].destroy();delete B[a]},get:function(a){return B[a]},isPercent:function(a){return q.isString(a)&&a.match(/(.*)%/)},parsePercent:function(a,i){q.isString(a)&&(a=a.match(/(.*)%/))&&(a=i?D(A(a[1])*i/100):a[1]/100);return!a||0>=a||a>i?i:a},parseFloat:function(a,i){if(!q.isNumber(a)&&(a=A(a),!q.isNumber(a)))throw Error("["+i+"]is not a valid number.");return a},ceil:function(a){return K(a,1)},floor:function(a){return K(a,-1)},_2D:"2d",_3D:"3d",light:function(a,i,b){return N(!1,a,i,b)},dark:function(a,i,b){return N(!0,a,i,b)},fixPixel:function(a){return q.isNumber(a)?a:A(a.replace("px",""))||0},toPixel:function(a){return q.isNumber(a)?a+"px":q.fixPixel(a)+"px"},emptyFn:function(){return!0},ratio:a.devicePixelRatio||1,supportCanvas:j,isOpera:d,isWebKit:f,isChrome:e,isSafari:g,isIE:h,isGecko:k,isMobile:m,touch:"ontouchend"in document,FRAME:m?30:60});q.Assert={isTrue:function(a,i){if(!0!==a)throw Error(i);}};q.requestAnimFrame=function(){var i=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(i){a.setTimeout(i,1E3/60)};return function(a){i(a)}}();q.Event={addEvent:function(a,i,b,d){a.addEventListener?a.addEventListener(i,b,d):a["on"+i]=b},fix:function(i){"undefined"==typeof i&&(i=a.event);var b={target:i.target,pageX:i.pageX,pageY:i.pageY,offsetX:i.offsetX,offsetY:i.offsetY,stopPropagation:!1,event:i};if("undefined"==typeof i.offsetX){var d=document.documentElement||{},c=document.body,e=(d.scrollLeft||c.scrollLeft||0)-(d.clientLeft||c.clientLeft||0),t=(d.scrollTop||c.scrollTop||0)-(d.clientTop||c.clientTop||0),f=i.targetTouches;i.target||(b.target=i.srcElement||(f?f[0].target:d||c));f&&(b.pageX=f[0].pageX,b.pageY=f[0].pageY);null==b.pageX&&null!=i.clientX&&(b.pageX=i.clientX+e,b.pageY=i.clientY+t);c=d=0;f=b.target;if(f.getBoundingClientRect)c=f.getBoundingClientRect(),d=c.left+(a.pageXOffset||e),c=c.top+(a.pageYOffset||t);else for(;f!=document.body&&f;)d+=f.offsetLeft-(f.scrollLeft||0),c+=f.offsetTop,f=f.offsetParent;b.offsetX=b.pageX-d;b.offsetY=b.pageY-c}b.x=b.offsetX;b.y=b.offsetY;i.stopPropagation||(i.stopPropagation=function(){a.event.cancelBubble=true});return b}};return q}(c);c.iChart=a;c.$||(c.$=a)})(window);(function(c){c.Element=function(a){var b=this._();b.type="element";b.ICHARTJS_OBJECT=!0;c._Abstract("configure",b);c._Abstract("afterConfiguration",b);b.options={};b.set({border:{enable:!1,color:"#BCBCBC",style:"solid",width:1,radius:0},shadow:!1,shadow_color:"#666666",shadow_blur:4,shadow_offsetx:0,shadow_offsety:0});b.variable={};b.events={mouseup:[],touchstart:[],touchmove:[],touchend:[],mousedown:[],dblclick:[]};b.registerEvent("initialize");b.configure.apply(b,Array.prototype.slice.call(arguments,1));b.default_=c.clone(b.options,!0);b.set(a);b.afterConfiguration(b)};c.Element.prototype={W:"width",H:"height",O:"top",B:"bottom",L:"left",R:"right",C:"center",X:"originx",Y:"originy",_:function(){return this},afterConfiguration:function(a){if(c.isObject(a.get("listeners")))for(var b in a.get("listeners"))a.on(b,a.get("listeners")[b]);a.initialize();a.fireEvent(a,"initialize",[a])},registerEvent:function(){for(var a=0;a<arguments.length;a++)this.events[arguments[a]]=[]},fireString:function(a,b,d,e){a=this.fireEvent(a,b,d);return c.isString(a)?a:!0!==a&&c.isDefined(a)?a.toString():e},fireEvent:function(a,b,d){var c=this.events[b].length;if(1==c)return this.events[b][0].apply(a,d);for(var f=!0,g=0;g<c;g++)this.events[b][g].apply(a,d)||(f=!1);return f},on:function(a,b){c.isString(a)&&c.isArray(this.events[a])?this.events[a].push(b):c.isArray(a)&&c.each(a,function(a){this.on(a,b)},this);return this},getPlugin:function(a){return this.constructor.plugin_[a]},set:function(a){c.isObject(a)&&c.merge(this.options,a)},pushIf:function(a,b){return!c.isDefined(this.get(a))||null==this.get(a)?this.push(a,b):this.get(a)},push:function(a,b){for(var d=a.split("."),c=d.length-1,f=this.options,g=0;g<c;g++)f[d[g]]||(f[d[g]]={}),f=f[d[g]];return f[d[c]]=b},get:function(a){for(var a=a.split("."),b=this.options[a[0]],d=1;d<a.length;d++){if(!b)return null;b=b[a[d]]}return b}};c.Painter=c.extend(c.Element,{configure:function(){this.type="painter";this.dimension=c._2D;c._Abstract("commonDraw",this);c._Abstract("initialize",this);this.set({strokeStyle:"gray",padding:10,color:"black",offsetx:0,offsety:0,background_color:"#FEFEFE",color_factor:0.15,style:"",border:{enable:!0},gradient:!1,gradient_mode:"LinearGradientUpDown",z_index:0,listeners:null,originx:null,originy:null});this.variable.event={mouseover:!1};this.variable.animation={};this.registerEvent("click","mousemove","mouseover","mouseout","beforedraw","draw")},is3D:function(){return this.dimension==c._3D},tf:function(a){var b=this._();return c.isFunction(b.get(a))?b.get(a).apply(b,[b.T,a]):b.get(a)},applyGradient:function(a,b,d,c){var f=this._();f.get("gradient")&&f.get("f_color")&&(f.push("f_color",f.T.gradient(a||f.x||0,b||f.y||0,d||f.get(f.W),c||f.get(f.H),[f.get("dark_color"),f.get("light_color")],f.get("gradient_mode"))),f.push("light_color",f.T.gradient(a||f.x||0,b||f.y||0,d||f.get(f.W),c||f.get(f.H),[f.get("background_color"),f.get("light_color")],f.get("gradient_mode"))),f.push("f_color_",f.get("f_color")))},_draw:function(){this.draw("",this.Combination)},draw:function(a,b){if(b)this.root.draw(a);else{if(!this.fireEvent(this,"beforedraw",[this,a]))return this;this.commonDraw(this,a);this.fireEvent(this,"draw",[this,a])}},inject:function(a){a&&(this.root=a,this.target=this.T=a.T)},doConfig:function(){var a=this._(),b=c.parsePadding(a.get("padding")),d=a.get("border.enable"),d=d?c.parsePadding(a.get("border.width")):[0,0,0,0],e=c.toRgb(a.get("background_color")),f=a.get("color_factor"),g=a.get("gradient")?0:null;a.set({border_top:d[0],border_right:d[1],border_bottom:d[2],border_left:d[3],hborder:d[1]+d[3],vborder:d[0]+d[2],padding_top:b[0]+d[0],padding_right:b[1]+d[1],padding_bottom:b[2]+d[2],padding_left:b[3]+d[3],hpadding:b[1]+b[3]+d[1]+d[3],vpadding:b[0]+b[2]+d[0]+d[2]});a.push("f_color",e);a.push("f_color_",e);a.push("light_color",c.light(e,f,g));a.push("dark_color",c.dark(e,0.8*f,g));a.push("light_color2",c.light(e,2*f,g));a.is3D()&&!a.get("xAngle_")&&(b=c.vectorP2P(a.get("xAngle"),a.get("yAngle")),a.push("xAngle_",b.x),a.push("yAngle_",b.y))}});c.Html=c.extend(c.Element,{configure:function(a){this.type="html";this.T=a;c._Abstract("beforeshow",this);this.set({animation:!0,default_action:!0,width:0,height:0,style:"",index:999,offset_top:0,offset_left:0});this.transitions=""},initialize:function(){var a=this._();a.wrap=a.get("wrap");a.dom=document.createElement("div");a.get("shadow")&&a.css("boxShadow",a.get("shadow_offsetx")+"px "+a.get("shadow_offsety")+"px "+a.get("shadow_blur")+"px "+a.get("shadow_color"));a.get("border.enable")&&(a.css("border",a.get("border.width")+"px "+a.get("border.style")+" "+a.get("border.color")),a.css("borderRadius",a.get("border.radius")+"px"));a.css("position","absolute");a.css("zIndex",a.get("index"));a.applyStyle();a.wrap.appendChild(a.dom);a.style=a.dom.style;a.get("default_action")&&a.doAction(a)},width:function(){return this.dom.offsetWidth},height:function(){return this.dom.offsetHeight},onTransitionEnd:function(a,b){var d="transitionend";c.isWebKit?d="webkitTransitionEnd":c.isOpera&&(d="oTransitionEnd");c.Event.addEvent(this.dom,d,a,b)},destroy:function(){this.wrap.removeChild(this.dom);this.dom=null},transition:function(a){this.transitions=""==this.transitions?a:this.transitions+","+a;c.isWebKit?this.css("WebkitTransition",this.transitions):c.isGecko?this.css("MozTransition",this.transitions):c.isOpera?this.css("OTransition",this.transitions):this.css("transition",this.transitions)},beforeshow:function(a,b,d){d.follow(a,b,d)},show:function(a,b){this.beforeshow(a,b,this);this.css("visibility","visible");this.get("animation")&&this.css("opacity",1)},hidden:function(){this.css("visibility","hidden")},getDom:function(){return this.dom},css:function(a,b){if(c.isString(a))if(c.isDefined(b))this.dom.style[a]=b;else return this.dom.style[a]},applyStyle:function(){for(var a=this.get("style").split(";"),b,d=0;d<a.length;d++)b=a[d].split(":"),1<b.length&&this.css(b[0],b[1])}});c.Component=c.extend(c.Painter,{configure:function(a){c.Component.superclass.configure.apply(this,arguments);this.type="component";this.set({fontsize:12,font:"Verdana",fontweight:"normal",fontunit:"px",tip:{enable:!1,border:{width:2}}});this._chart=this.proxy=this.atomic=!1;this.inject(a)},initialize:function(){c._Abstract("isEventValid",this);c._Abstract("doDraw",this);this.doConfig()},getDimension:function(){return{x:this.x,y:this.y,width:this.get("width"),height:this.get("height")}},destroy:function(){this.tip&&this.tip.destroy();for(var a in this.events)this.events[a]=[]},_setUp:function(){},doConfig:function(){c.Component.superclass.doConfig.call(this);var a=this._(),b=a.get(a.W),d=a.get("maxwidth"),e=a.get(a.X);if(b&&d&&(b=a.push(a.W,c.parsePercent(b,d)),b>d&&(b=a.push("width",d)),d>b)){var f=a.get("align")||a.C;f==a.C?e+=(d-b)/2:f==a.R&&(e+=d-b)}a.x=a.push(a.X,e+a.get("offsetx"));a.y=a.push(a.Y,a.get(a.Y)+a.get("offsety"));a.push("fontStyle",c.getFont(a.get("fontweight"),a.get("fontsize"),a.get("font"),a.get("fontunit")));a.data=a.get("data");a.get("tip.enable")&&(a.pushIf("tip.border.color",a.get("f_color")),c.isFunction(a.get("tip.invokeOffset"))||a.push("tip.invokeOffset",a.tipInvoke()))},isMouseOver:function(a){return this.isEventValid(a,this)},redraw:function(a){this.root.draw(a,this.root.Combination)},last:c.emptyFn,commonDraw:function(a){a.proxy||a.doDraw.call(a,a)}});c.Tip=c.extend(c.Html,{configure:function(){c.Tip.superclass.configure.apply(this,arguments);this.type="tip";this.set({name:"",index:0,value:"",text:"",showType:"follow",invokeOffset:null,fade_duration:300,move_duration:100,timing_function:"ease-out",invokeOffsetDynamic:!1,style:"textAlign:left;padding:4px 5px;cursor:pointer;backgroundColor:rgba(239,239,239,.85);fontSize:12px;color:black;",border:{enable:!0,radius:5},delay:200});this.registerEvent("parseText")},position:function(a,b,d){d.style.top=(0>a?0:a)+"px";d.style.left=(0>b?0:b)+"px"},follow:function(a,b,d){d.get("invokeOffsetDynamic")?b.hit&&((c.isString(b.text)||c.isNumber(b.text))&&d.text(b.name,b.value,b.text,b.i,d),a=d.get("invokeOffset")(d.width(),d.height(),b),d.position(a.top,a.left,d)):"follow"!=d.get("showType")&&c.isFunction(d.get("invokeOffset"))?(a=d.get("invokeOffset")(d.width(),d.height(),b),d.position(a.top,a.left,d)):d.position(a.y-1.1*d.height()-2,a.x+2,d)},text:function(a,b,d,c,f){f.dom.innerHTML=f.fireString(f,"parseText",[f,a,b,d,c],d)},hidden:function(){this.get("animation")?this.css("opacity",0):this.css("visibility","hidden")},doAction:function(a){a.T.on("mouseover",function(b,d,c){a.show(d,c)}).on("mouseout",function(b,d){a.hidden(d)});if("follow"==a.get("showType"))a.T.on("mousemove",function(b,d,c){a.T.variable.event.mouseover&&setTimeout(function(){a.dom&&a.T.variable.event.mouseover&&a.follow(d,c,a)},a.get("delay"))})},initialize:function(){c.Tip.superclass.initialize.call(this);var a=this._();a.text(a.get("name"),a.get("value"),a.get("text"),a.get("index"),a);a.hidden();if(a.get("animation")){var b=a.get("move_duration")/1E3+"s "+a.get("timing_function")+" 0s";a.transition("opacity "+a.get("fade_duration")/1E3+"s "+a.get("timing_function")+" 0s");a.transition("top "+b);a.transition("left "+b);a.onTransitionEnd(function(){0==a.css("opacity")&&a.css("visibility","hidden")},!1)}}});c.CrossHair=c.extend(c.Html,{configure:function(){c.CrossHair.superclass.configure.apply(this,arguments);this.type="crosshair";this.set({top:0,left:0,hcross:!0,vcross:!0,point:{enable:!0,color:null,size:12},invokeOffset:null,line_width:1,line_color:"#1A1A1A",delay:200})},follow:function(a,b,d){d.get("invokeOffset")?(a=d.get("invokeOffset")(a,b))&&a.hit?(d.o_valid=!0,d.position(a.top-d.top,a.left-d.left,d)):(!a||!d.o_valid)&&d.position(d.owidth,d.oheight,d):d.position(a.y-d.top-1,a.x-d.left-1,d)},position:function(a,b,d){d.horizontal.style.top=a-d.size+"px";d.vertical.style.left=b-d.size+"px";d.point&&(d.point.style.top=a-d.point.size/2+"px",d.point.style.left=b-d.point.size/2+"px")},doCreate:function(a,b,d,e){var f=document.createElement("div");f.style.width=c.toPixel(b);f.style.height=c.toPixel(d);f.style.backgroundColor=e;f.style.position="absolute";a.dom.appendChild(f);return f},doAction:function(a){a.T.on("mouseover",function(b,d,c){a.show(d,c)}).on("mouseout",function(b,d,c){a.hidden(d,c)}).on("mousemove",function(b,d,c){a.follow(d,c,a)})},initialize:function(){c.CrossHair.superclass.initialize.call(this);var a=this._(),b=a.get("line_width"),d=a.get("hcross"),e=a.get("vcross"),f=a.get("line_color"),g=a.get("point.size");a.size=b/2;a.top=c.fixPixel(a.get(a.O));a.left=c.fixPixel(a.get(a.L));a.owidth=-a.T.root.width;a.oheight=-a.T.root.height;a.o_valid=!1;a.css("width","0px");a.css("height","0px");a.css("top",a.top+"px");a.css("left",a.left+"px");a.css("visibility","hidden");a.horizontal=a.doCreate(a,d?a.get(a.W):0,b,f);a.vertical=a.doCreate(a,b,e?a.get(a.H):0,f);d&&e&&a.get("point.enable")&&(a.point=a.doCreate(a,g,g,a.get("point.color")||f),a.point.style.borderRadius="100%",a.point.size=g)}});c.Legend=c.extend(c.Component,{configure:function(){c.Legend.superclass.configure.apply(this,arguments);this.type="legend";this.set({data:void 0,width:"auto",column:1,row:"max",maxwidth:0,line_height:16,sign:"square",sign_size:10,sign_space:5,legend_space:5,z_index:1009,text_with_sign_color:!1,align:"right",valign:"middle"});this.atomic=!0;this.registerEvent("parse")},isEventValid:function(a,b){var d={valid:!1},e=b.get("line_height");a.x>this.x&&a.x<b.x+b.width&&a.y>b.y&&a.y<b.y+b.height&&c.each(b.data,function(c,g){if(a.x>c.x&&a.x<c.x+c.width_+b.get("signwidth")&&a.y>c.y-e/2&&a.y<c.y+e/2)return d={valid:!0,index:g,target:c},!1},b);return d},drawCell:function(a,b,c,e,f,g){var h=g.get("sign_size"),j=g.getPlugin("sign");if(!j||!j.call(g,g.T,f,{x:a+h/2,y:b},h,e))-1!=f.indexOf("bar")&&g.T.box(a,b-h/12,h,h/6,0,e),"round"==f?g.T.round(a+h/2,b,h/2,e):"round-bar"==f?g.T.round(a+h/2,b,h/4,e):"square-bar"==f?g.T.box(a+h/4,b-h/4,h/2,h/2,0,e):"square"==f&&g.T.box(a,b-h/2,h,h,0,e);g.T.fillText(c,a+g.get("signwidth"),b,0,g.get("text_with_sign_color")?e:g.get("color"),"lr",g.get("line_height"))},doDraw:function(a){a.T.box(a.x,a.y,a.width,a.height,a.get("border"),a.get("f_color"),!1,a.get("shadow"));a.T.textStyle(a.L,"middle",c.getFont(a.get("fontweight"),a.get("fontsize"),a.get("font")));c.each(a.data,function(b){a.drawCell(b.x,b.y,b.text,b.color,b.sign,a)})},doLayout:function(a,b){var d=a.get("sign_size"),e=0,f=0,g=0,h=a.get("column"),j=a.get("row"),k=a.data.length,h=h>k?k:h;a.T.textFont(a.get("fontStyle"));a.get("line_height")<d&&a.push("line_height",d+d/5);a.push("signwidth",d+a.get("sign_space"));c.each(a.data,function(b){b.width_=a.T.measureText(b.text)},a);for(var m=0;m<h;m++){for(var g=0,n=m;n<k;n+=h)g=Math.max(g,a.data[n].width_);a.columnwidth[m]=g;e+=g}for(m=0;m<j;m++){g=0;for(n=m*h;n<k;n++)g=Math.max(g,a.data[n].text.split("\n").length);a.columnheight[m]=g;f+=g}e=a.push(a.W,e+a.get("hpadding")+a.get("signwidth")*h+(h-1)*a.get("legend_space"));if(e>a.get("maxwidth")&&(d=Math.floor(a.get("fontsize")*(a.get("maxwidth")/e)),!(10>d&&1==h))){9<d?a.push("fontStyle",c.getFont(a.get("fontweight"),a.push("fontsize",d),a.get("font"))):1<h&&a.push("row",Math.ceil(k/a.push("column",h-1)));a.doLayout(a,b);return}var p;a.width=e;a.height=f=a.push(a.H,f*a.get("line_height")+a.get("vpadding"));a.y=a.get("valign")==a.O?b.get("t_originy"):a.get("valign")==a.B?b.get("b_originy")-f:b.get("centery")-f/2;a.x=a.get("align")==a.L?b.get("l_originx"):a.get("align")==a.C?b.get("centerx")-e/2:b.get("r_originx")-e;a.x=a.push(a.X,(0>a.x?b.get("l_originx"):a.x)+a.get("offsetx"));a.y=a.push(a.Y,(0>a.y?b.get("t_originy"):a.y)+a.get("offsety"));g=a.y+a.get("padding_top");d=a.get("legend_space")+a.get("signwidth");for(m=0;m<j;m++){f=a.x+a.get("padding_left");p=a.columnheight[m]/2*a.get("line_height");g+=p;for(n=0;n<h&&m*h+n<k;n++)e=a.data[m*h+n],e.y=g,e.x=f,f+=a.columnwidth[n]+d;g+=p}},doConfig:function(){c.Legend.superclass.doConfig.call(this);var a=this._(),b=a.root,d=c.isNumber(a.get("column")),e=c.isNumber(a.get("row")),f=a.data.length;a.get("align")==a.C&&"middle"==a.get("valign")&&a.push("valign",a.O);b.get("align")==a.L&&"middle"==a.get("valign")&&a.push("align",a.R);c.each(a.data,function(b,d){c.merge(b,a.fireEvent(a,"parse",[a,b.name,d]));b.text=b.text||b.name||"";b.sign=b.sign||a.get("sign")},a);!d&&!e&&(d=a.push("column",1));d&&!e&&(e=a.push("row",Math.ceil(f/a.get("column"))));!d&&e&&(d=a.push("column",Math.ceil(f/a.get("row"))));d=a.get("column");e=a.get("row");f>e*d&&(e+=Math.ceil((f-e*d)/d),e=a.push("row",e));a.columnwidth=[];a.columnheight=[];a.doLayout(a,b)}});c.Label=c.extend(c.Component,{configure:function(){c.Label.superclass.configure.apply(this,arguments);this.type="label";this.set({text:"",line_height:12,line_thickness:1,sign:"square",sign_size:12,padding:"2 5",offsety:2,sign_space:5,background_color:"#efefef",text_with_sign_color:!1});this.atomic=!0;this.registerEvent()},isEventValid:function(a,b){return{valid:c.inRange(b.labelx,b.labelx+b.get(b.W),a.x)&&c.inRange(b.labely,b.labely+b.get(b.H),a.y)}},text:function(a){a&&this.push("text",a);this.push(this.W,this.T.measureText(this.get("text"))+this.get("hpadding")+this.get("sign_size")+this.get("sign_space"))},localizer:function(a){var b=a.get("quadrantd"),c=a.get("line_points"),e=a.get("smooth"),b=1<=b&&2>=b,f=a.get("labelx"),g=a.get("labely");a.labelx=f+(b?-a.get(a.W)-e:e);a.labely=g-a.get(a.H)/2;c[2]={x:f,y:g};c[3]={x:c[2].x+(b?-e:e),y:c[2].y}},doLayout:function(a,b,d,e){e.push("labelx",e.get("labelx")+a/d);e.push("labely",e.get("labely")+b/d);c.each(e.get("line_points"),function(c,d){c.x+=a;c.y+=b;return 1==d},e);e.localizer(e)},doDraw:function(a){var b=a.get("line_points"),c=a.get("sign_size"),e=a.labelx+a.get("padding_left"),f=a.labely+a.get("padding_top");a.T.label(b,a.get("line_thickness"),a.get("border.color"));a.T.box(a.labelx,a.labely,a.get(a.W),a.get(a.H),a.get("border"),a.get("f_color"),!1,a.get("shadow"));a.T.textStyle(a.L,a.O,a.get("fontStyle"));b=a.get("color");a.get("text_with_sign_color")&&(b=a.get("scolor"));"square"==a.get("sign")?a.T.box(e,f,c,c,0,a.get("scolor")):a.get("sign")&&a.T.round(e+c/2,f+c/2,c/2,a.get("scolor"));a.T.fillText(a.get("text"),e+c+a.get("sign_space"),f,a.get("textwidth"),b)},doConfig:function(){c.Label.superclass.doConfig.call(this);var a=this._();a.T.textFont(a.get("fontStyle"));a.get("fontsize")>a.get("line_height")&&a.push("line_height",a.get("fontsize"));a.get("sign")||(a.push("sign_size",0),a.push("sign_space",0));a.push(a.H,a.get("line_height")+a.get("vpadding"));a.text();a.localizer(a)}});c.Text=c.extend(c.Component,{configure:function(){c.Text.superclass.configure.apply(this,arguments);this.type="text";this.set({text:"",textAlign:"center",align:"center",background_color:0,textBaseline:"top",border:{enable:!1},width:0,height:0,padding:0,writingmode:"lr",line_height:16,rotate:0});this.registerEvent()},doDraw:function(a){a.get("box_feature")&&a.T.box(a.x,a.y,a.get(a.W),a.get(a.H),a.get("border"),a.get("f_color"));a.T.text(a.get("text"),a.get("textx"),a.get("texty"),a.get(a.W)-a.get("hpadding"),a.get("color"),a.get("textAlign"),a.get("textBaseline"),a.get("fontStyle"),a.get("writingmode"),a.get("line_height"),a.get("shadow"),a.get("rotate"))},isEventValid:function(){return{valid:!1}},doLayout:function(a,b,c,e){e.x=e.push(e.X,e.x+a);e.y=e.push(e.Y,e.y+b);e.push("textx",e.get("textx")+a);e.push("texty",e.get("texty")+b)},doConfig:function(){c.Text.superclass.doConfig.call(this);var a=this._(),b=a.x,d=a.y+a.get("padding_top"),e=a.get(a.W),f=a.get(a.H),g=a.get("textAlign"),b=b+(g==a.C?e/2:g==a.R?e-a.get("padding_right"):a.get("padding_left"));f&&(d+=f/2,a.push("textBaseline","middle"));a.push("textx",b);a.push("texty",d);a.push("box_feature",e&&f);a.applyGradient()}});(function(a){function b(i){this.canvas="string"===typeof i?a(i):i;this.c=this.canvas.getContext("2d")}var c=Math.PI,e=c/90,f=e/2,g=Math.ceil,h=Math.floor,j=2*c,k=Math.max,m=Math.min,n=Math.sin,p=Math.cos,l=function(a,b){return 1==a?h(b)+0.5:Math.round(b)},r=function(a,b,c,d){var e=b.x,f=b.y,g=a[c-1],h=a[c+1],j,o;if(c<a.length-1){var a=g.y,c=h.y,l;j=(d*e+g.x)/(d+1);o=(d*f+a)/(d+1);h=(d*e+h.x)/(d+1);d=(d*f+c)/(d+1);l=(d-o)*(h-e)/(h-j)+f-d;o+=l;d+=l;o>a&&o>f?(o=k(a,f),d=2*f-o):o<a&&o<f&&(o=m(a,f),d=2*f-o);d>c&&d>f?(d=k(c,f),o=2*f-d):d<c&&d<f&&(d=m(c,f),o=2*f-d);b.rcx=h;b.rcy=d}return[g.rcx||g.x,g.rcy||g.y,j||e,o||f,e,f]},v=function(i){return a.isNumber(i)?i:a.parseFloat(i,i)},s=function(i,b){var c,d=0,e,f=0,g=!1,h=b.get("labels");b.data=i;if("simple"==b.dataType)b.total=0,a.each(i,function(i){i.background_color=i.color;d=i.value||0;if(a.isArray(d)){var h=0;f=d.length>f?d.length:f;for(var j=0;j<d.length;j++)null!=d[j]&&(d[j]=v(d[j]),h+=d[j],g||(c=e=d[j],g=!0),c=k(d[j],c),e=m(d[j],e));i.total=h}else d=v(d),i.value=d,b.total+=d,g||(c=e=d,g=!0),c=k(d,c),e=m(d,e)},b),a.isArray(h)&&(f=h.length>f?h.length:f),b.push("maxItemSize",f);else if("stacked"==b.dataType||"complex"==b.dataType){var j=h.length,o,l,y,n="stacked"==b.dataType;if(0==j)for(var j=i[0].value.length,p=0;p<j;p++)h.push("");b.columns=[];for(p=0;p<j;p++)o=[],l=0,a.each(i,function(b,t){if((d=b.value[p])||0==d)b.value[p]=d=v(d),l+=d,n?y=i[t].color:(y=b.color,g||(c=e=d,g=!0),c=k(d,c),e=m(d,e)),o.push(a.applyIf({name:b.name,value:b.value[p],background_color:y,color:y},a.isArray(b.extra)?b.extra[p]||{}:b))}),n&&(g||(c=e=d,g=!0),c=k(l,c),e=m(l,e)),b.columns.push({total:l,name:h[p],item:o})}b.push("minValue",e);b.push("maxValue",c);b.doConfig()},w={};b.prototype={getContext:function(){return this.c},css:function(i,b){if(a.isDefined(b))this.canvas.style[i]=b;else return this.canvas.style[i]},ellipse:function(a,b,c,d,f,h,g,j,k,o,l,y,m,v){m=!!m;this.save().gCo(v).strokeStyle(j,k,o).shadowOn(l).fillStyle(g).moveTo(a,b).beginPath();for(m&&this.moveTo(a,b);f<=h;)this.lineTo(a+c*p(f),b+d*n(f)),f+=e;return this.lineTo(a+c*p(h),b+d*n(h)).closePath().stroke(j).fill(g).restore()},arc:function(a,b,c,d,e,f,g,j,k,o,l,m,v,r){j&&(c-=h(k/2));if(0>=c)return this;this.save().gCo(r).strokeStyle(j,k,o).fillStyle(g).beginPath();d?(this.moveTo(a+p(e)*(c-d),b+n(e)*(c-d)).lineTo(a+p(e)*c,b+n(e)*c),this.c.arc(a,b,c,e,f,m),this.lineTo(a+p(f)*(c-d),b+n(f)*(c-d)),this.c.arc(a,b,c-d,f,e,!m)):(this.c.arc(a,b,c,e,f,m),v&&this.lineTo(a,b));this.closePath();j?this.shadowOn(l).stroke(j).shadowOff().fill(g):this.shadowOn(l).fill(g);return this.restore()},sector:function(a,b,c,d,e,f,g,h,j,o,k,l,m,n){k&&this.arc(a,b,c,d,e,f,g,h,j,o,k,l,!m,!n);return this.arc(a,b,c,d,e,f,g,h,j,o,!1,l,!m)},sector3D:function(){var i=function(i,b,c,d,f,t,g,h,x){var g=function(a,e){this.lineTo(i+c*p(a),b+(e||0)+d*n(a))},j=f;for(this.fillStyle(a.dark(x)).moveTo(i+c*p(f),b+d*n(f)).beginPath();j<=t;)g.call(this,j),j+=e;g.call(this,t);this.lineTo(i+c*p(t),b+h+d*n(t));for(j=t;j>=f;)g.call(this,j,h),j-=e;g.call(this,f,h);this.lineTo(i+c*p(f),b+d*n(f)).closePath().fill(!0)},b=function(a,i,b,c,d,e,f,t){b=a+b*p(f);c=i+e+c*n(f);this.moveTo(a,i).beginPath().fillStyle(t).lineTo(a,i+e).lineTo(b,c).lineTo(b,c-e).lineTo(a,i).closePath().fill(!0)},c=function(i,c,d,e,f,g,h,x,j){var u=a.quadrantd(f),k=a.quadrantd(g),j=a.dark(j);(1==u||2==u)&&b.call(this,i,c,d,e,h,x,f,j);(0==k||3==k)&&b.call(this,i,c,d,e,h,x,g,j)},d=function(a,b,d,e,f,t,g,h,j,u,k,l,m){this.ellipse(a,b+g,d,e,f,t,h,j,u,k,l,m,!0);c.call(this,a,b,d,e,f,t,m,g,h);this.ellipse(a,b,d,e,f,t,h,j,u,k,!1,m,!0);i.call(this,a,b,d,e,f,t,m,g,h);return this};d.layerPaint=c;d.sPaint=i;d.layerDraw=b;return d}(),textStyle:function(a,b,c){return this.textAlign(a).textBaseline(b).textFont(c)},strokeStyle:function(a,b,c,d){if(a&&(b&&(this.c.lineWidth=b),c&&(this.c.strokeStyle=c),d))this.c.lineJoin=d;return this},globalAlpha:function(a){a&&(this.c.globalAlpha=a);return this},fillStyle:function(a){a&&(this.c.fillStyle=a);return this},arc2:function(a,b,c,d,e,f){c&&this.c.arc(a,b,c,d,e,f);return this},textAlign:function(a){a&&(this.c.textAlign=a);return this},textBaseline:function(a){a&&(this.c.textBaseline=a);return this},textFont:function(a){a&&(this.c.font=a);return this},shadowOn:function(a){a&&(this.c.shadowColor=a.color,this.c.shadowBlur=a.blur,this.c.shadowOffsetX=a.offsetx,this.c.shadowOffsetY=a.offsety);return this},shadowOff:function(){this.c.shadowColor="rgba(0,0,0,0.0)";this.c.shadowBlur=this.c.shadowOffsetX=this.c.shadowOffsetY=0;return this},gradient:function(a,b,c,d,e,f,g){var f=f.toLowerCase(),h=a,j=b,k=!f.indexOf("linear"),f=f.substring(14);if(k){switch(f){case "updown":j+=d;break;case "downup":b+=d;break;case "leftright":h+=c;break;case "rightleft":a+=c;break;default:return e[0]}return this.avgLinearGradient(a,b,h,j,e)}a+=c/2;b+=d/2;return this.avgRadialGradient(a,b,g||0,a,b,c>d?d:c,"outin"==f?e.reverse():e)},avgLinearGradient:function(a,b,c,d,e){a=this.createLinearGradient(a,b,c,d);for(b=0;b<e.length;b++)a.addColorStop(b/(e.length-1),e[b]);return a},createLinearGradient:function(a,b,c,d){return this.c.createLinearGradient(a,b,c,d)},avgRadialGradient:function(a,b,c,d,e,f,g){a=this.createRadialGradient(a,b,c,d,e,f);for(b=0;b<g.length;b++)a.addColorStop(b/(g.length-1),g[b]);return a},createRadialGradient:function(a,b,c,d,e,f){return this.c.createRadialGradient(a,b,c,d,e,f)},text:function(a,b,c,d,e,f,g,h,j,k,l,m){return this.save().textStyle(f,g,h).fillText(a,b,c,d,e,j,k,l,m).restore()},fillText:function(b,c,d,e,g,h,j,k,m){b=b.toString();if(!b||!b.length)return this;e=e||!1;h=h||"lr";j=j||16;c=l(0,c);d=l(0,d);h=b.split("tb"==h?"":"\n");1<h.length&&("middle"==this.c.textBaseline?d-=(h.length-1)*j/2:"bottom"==this.c.textBaseline&&(d-=(h.length-1)*j));this.save().fillStyle(g).translate(c,d).rotate(f*m).shadowOn(k);try{a.each(h,function(a,b){e&&0<e?this.c.fillText(a,0,b*j,e):this.c.fillText(a,0,b*j)},this)}catch(o){console.log(o.message+"["+b+","+c+","+d+"]")}return this.restore()},measureText:function(b){var c=0;a.each(b.split("\n"),function(a){c=k(this.measureText(a).width,c)},this.c);return c},moveTo:function(a,b){this.c.moveTo(a||0,b||0);return this},lineTo:function(a,b){this.c.lineTo(a||0,b||0);return this},save:function(){this.c.save();return this},restore:function(){this.c.restore();return this},beginPath:function(){this.c.beginPath();return this},closePath:function(){this.c.closePath();return this},stroke:function(a){a&&this.c.stroke();return this},fill:function(a){a&&this.c.fill();return this},cube:function(b,c,d,e,f,h,g,j,k,o,m,n){b=l(o,b);c=l(o,c);g=g&&0<g?g:f;e=c-g*e;d=l(o,b+g*d);e=l(o,e);n&&(this.polygon(j,k,o,m,n,!1,[{x:b,y:c},{x:d,y:e},{x:d+f,y:e},{x:b+f,y:c}]),this.polygon(j,k,o,m,n,!1,[{x:b,y:c},{x:b,y:c+h},{x:b+f,y:c+h},{x:b+f,y:c}]),this.polygon(j,k,o,m,n,!1,[{x:b+f,y:c},{x:d+f,y:e},{x:d+f,y:e+h},{x:b+f,y:c+h}]));this.polygon(a.dark(j),k,o,m,!1,!1,[{x:b,y:c},{x:d,y:e},{x:d+f,y:e},{x:b+f,y:c}]);this.polygon(j,k,o,m,!1,!1,[{x:b,y:c},{x:b,y:c+h},{x:b+f,y:c+h},{x:b+f,y:c}]);this.polygon(a.dark(j),k,o,m,!1,!1,[{x:b+f,y:c},{x:d+f,y:e},{x:d+f,y:e+h},{x:b+f,y:c+h}]);return this},cube3D:function(b,c,d,e,f,h,g,j,k,o,m,n){b=l(o,b);c=l(o,c);j=!j||0==j?h:j;f?(e=a.vectorP2P(d,e),d=b+j*e.x,e=c-j*e.y):(d=b+j*d,e=c-j*e);for(;6>n.length;)n.push(!1);d=l(o,d);e=l(o,e);j=[];0>e?a.isObject(n[4])&&j.push(a.applyIf({points:[{x:b,y:c-g},{x:d,y:e-g},{x:d+h,y:e-g},{x:b+h,y:c-g}]},n[4])):a.isObject(n[0])&&j.push(a.applyIf({points:[{x:b,y:c},{x:d,y:e},{x:d+h,y:e},{x:b+h,y:c}]},n[0]));a.isObject(n[1])&&j.push(a.applyIf({points:[{x:d,y:e},{x:d,y:e-g},{x:d+h,y:e-g},{x:d+h,y:e}]},n[1]));a.isObject(n[2])&&j.push(a.applyIf({points:[{x:b,y:c},{x:b,y:c-g},{x:d,y:e-g},{x:d,y:e}]},n[2]));a.isObject(n[3])&&j.push(a.applyIf({points:[{x:b+h,y:c},{x:b+h,y:c-g},{x:d+h,y:e-g},{x:d+h,y:e}]},n[3]));0>e?a.isObject(n[0])&&j.push(a.applyIf({points:[{x:b,y:c},{x:d,y:e},{x:d+h,y:e},{x:b+h,y:c}]},n[0])):a.isObject(n[4])&&j.push(a.applyIf({points:[{x:b,y:c-g},{x:d,y:e-g},{x:d+h,y:e-g},{x:b+h,y:c-g}]},n[4]));a.isObject(n[5])&&j.push(a.applyIf({points:[{x:b,y:c},{x:b,y:c-g},{x:b+h,y:c-g},{x:b+h,y:c}]},n[5]));a.each(j,function(a){this.polygon(a.color,k,o,m,a.shadow,a.alpha,a.points)},this);return this},polygon:function(a,b,c,d,e,f,h,g,j,k){this.save().strokeStyle(b,c,d).beginPath().fillStyle(a).globalAlpha(f).shadowOn(e).moveTo(h[0].x,h[0].y);if(g){this.moveTo(l(c,k[0].x),l(c,k[0].y)).lineTo(l(c,h[0].x),l(c,h[0].y));for(d=1;d<h.length;d++)this.bezierCurveTo(r(h,h[d],d,j));this.lineTo(l(c,k[1].x),l(c,k[1].y))}else for(d=1;d<h.length;d++)this.lineTo(l(c,h[d].x),l(c,h[d].y));return this.closePath().stroke(b).fill(a).restore()},lines:function(a,b,c,d){if(!b)return this;this.save().gCo(d).beginPath().strokeStyle(!0,b,c).moveTo(l(b,a[0]),l(b,a[1]));for(c=2;c<a.length-1;c+=2)this.lineTo(l(b,a[c]),l(b,a[c+1]));return this.stroke(!0).restore()},bezierCurveTo:function(a){this.c.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);return this},label:function(a,b,c){return this.save().beginPath().strokeStyle(!0,b,c).moveTo(l(b,a[0].x),l(b,a[0].y)).bezierCurveTo([a[1].x,a[1].y,a[2].x,a[2].y,a[3].x,a[3].y]).stroke(!0).restore()},lineArray:function(a,b,c,d,e){if(!b)return this;this.save().beginPath().strokeStyle(!0,b,c).moveTo(l(b,a[0].x),l(b,a[0].y));for(c=1;c<a.length;c++)d?this.bezierCurveTo(r(a,a[c],c,e||1.5)):this.lineTo(l(b,a[c].x),l(b,a[c].y));return this.stroke(!0).restore()},dotted:function(b,c,d,e,f,g,j,k,m){if(!f)return this;var b=l(f,b),c=l(f,c),d=l(f,d),e=l(f,e),o=a.distanceP2P(b,c,d,e),n;if(0>=j||o<=j||b!=d&&c!=e)return this.line(b,c,d,e,f,g,m);if(b>d||c>e)n=b,b=d,d=n,n=c,c=e,e=n;this.save().gCo(m).strokeStyle(!0,f,g).beginPath().moveTo(b,c);f=j*(k||1);g=h(o/(j+f));o=o-g*(j+f)>j;k=c==e;g=o?g+1:g;for(m=1;m<=g;m++)this.lineTo(k?b+j*m+f*(m-1):b,k?c:c+j*m+f*(m-1)).moveTo(k?b+(j+f)*m:b,k?c:c+(j+f)*m);o||this.lineTo(d,e);return this.stroke(!0).restore()},line:function(a,b,c,d,e,f,h){if(!e)return this;this.save().gCo(h);return this.beginPath().strokeStyle(!0,e,f).moveTo(l(e,a),l(e,b)).lineTo(l(e,c),l(e,d)).stroke(!0).restore()},round:function(a,b,c,d,e,f){return this.arc(a,b,c,0,0,j,d,!!f,e,f)},round0:function(a,b,c,d,e){return this.arc(a.x,a.y,b,0,0,j,c,!!e,d,e)},fillRect:function(a,b,c,d){this.c.fillRect(a,b,c,d);return this},translate:function(a,b){this.c.translate(a,b);return this},rotate:function(a){this.c.rotate(a);return this},clearRect:function(a,b,c,d){c=c||this.canvas.width;d=d||this.canvas.height;this.c.clearRect(a||0,b||0,c,d);return this},gCo:function(a){return a?this.gCO(a):this},gCO:function(a){this.c.globalCompositeOperation=a?"destination-over":"source-over";return this},box:function(b,e,f,k,q,m,n,p,v){q=q||{enable:0};if(q.enable){var o=q.width,r=q.color,s=q.radius,w=a.isNumber(o),o=a.parsePadding(o);o[0]==o[1]&&o[1]==o[2]&&o[2]==o[3]&&(w=!0);p=p?1:-1;f+=p*(o[1]+o[3])/2;k+=p*(o[0]+o[2])/2;b-=p*(o[3]/2);e-=p*(o[0]/2);o=w?o[0]:o;s=!w||!s||0==s||"0"==s?0:a.parsePadding(s)}this.save().gCo(v).fillStyle(m).strokeStyle(w,o,r);s?this.beginPath().moveTo(l(o,b+s[0]),l(o,e)).lineTo(l(o,b+f-s[1]),l(o,e)).arc2(l(o,b+f-s[1]),l(o,e+s[1]),s[1],3*c/2,j).lineTo(l(o,b+f),l(o,e+k-s[2])).arc2(l(o,b+f-s[2]),l(o,e+k-s[2]),s[2],0,c/2).lineTo(l(o,b+s[3]),l(o,e+k)).arc2(l(o,b+s[3]),l(o,e+k-s[3]),s[3],c/2,c).lineTo(l(o,b),l(o,e+s[0])).arc2(l(o,b+s[0]),l(o,e+s[0]),s[0],c,3*c/2).closePath().shadowOn(n).stroke(o).shadowOff().fill(m):!q.enable||w?(o&&q.enable&&(this.shadowOn(n).c.strokeRect(b,e,f,k),this.shadowOff()),m&&this.fillRect(b,e,f,k)):(o&&(r=a.isArray(r)?r:[r,r,r,r],this.shadowOn(n).line(b+f,e+o[0]/2,b+f,e+k-o[0]/2,o[1],r[1],0).line(b,e+o[0]/2,b,e+k-o[0]/2,o[3],r[3],0).line(h(b-o[3]/2),e,b+f+o[1]/2,e,o[0],r[0],0).line(h(b-o[3]/2),e+k,b+f+o[1]/2,e+k,o[2],r[2],0).shadowOff()),m&&this.beginPath().moveTo(h(b+o[3]/2),h(e+o[0]/2)).lineTo(g(b+f-o[1]/2),e+o[0]/2).lineTo(g(b+f-o[1]/2),g(e+k-o[2]/2)).lineTo(h(b+o[3]/2),g(e+k-o[2]/2)).lineTo(h(b+o[3]/2),h(e+o[0]/2)).closePath().fill(m));return this.restore()},toDataURL:function(a){return this.canvas.toDataURL(a||"image/png")},unbound:function(){for(var a in w)this.canvas.removeEventListener(a,w[a],!1);w={}},addEvent:function(b,c){w[b]=c;a.Event.addEvent(this.canvas,b,c,!1)}};a.taylor={light:function(a,b){b.highlight=!1;a.on("mouseover",function(){b.highlight=!0;a.redraw("mouseover")}).on("mouseout",function(){b.highlight=!1;a.redraw("mouseout")}).on("beforedraw",function(){a.push("f_color",b.highlight?a.get("light_color"):a.get("f_color_"));return!0})}};a.Chart=a.extend(a.Painter,{configure:function(){a.Chart.superclass.configure.apply(this,arguments);this.type="chart";this.dataType="simple";this.set({id:"",render:"",data:[],width:void 0,height:void 0,lineJoin:"round",align:"center",default_mouseover_css:!0,turn_off_touchmove:!1,showpercent:!1,decimalsnum:1,empty:{text:"No data found",fontsize:16},title:{text:"",fontweight:"bold",fontsize:20,height:30},subtitle:{text:"",fontweight:"bold",fontsize:16,height:20},footnote:{text:"",color:"#5d7f97",textAlign:"right",height:20},animation:!1,doAnimation:null,animation_timing_function:"easeInOut",animation_duration:1E3,z_index:999,legend:{enable:!1},tip:{enable:!1}});this.registerEvent("beforeAnimation","afterAnimation","resize","animating");this.T=null;this.show=this.Animationed=this.Combination=this.Rendered=!1;this.data=[];this.plugins=[];this.components=[];this.oneways=[];this.total=0;this._chart=!0},toDataURL:function(a){return this.T.toDataURL(a)},segmentRect:function(){this.Combination||this.T.clearRect()},resetCanvas:function(){this.Combination||this.T.box(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"),0,this.get("f_color"),0,0,!0)},animation:function(b){b.segmentRect();b.coo&&!b.ILLUSIVE_COO&&b.coo.draw();b.doAnimation(b.variable.animation.time,b.duration,b);a.each(b.plugins,function(a){a.A_draw&&(a.variable.animation.animating=!0,a.variable.animation.time=b.variable.animation.time,a.draw(),a.variable.animation.animating=!1)});b.Combination||(a.each(b.oneways,function(a){a.draw()}),b.variable.animation.time<b.duration?(b.variable.animation.time++,a.requestAnimFrame(function(){b.animation(b)})):a.requestAnimFrame(function(){b.Animationed=!0;a.each(b.plugins,function(a){a.Animationed=!0});b.processAnimation=!1;b.draw();a.each(b.plugins,function(a){a.processAnimation=!1});b.fireEvent(b,"afterAnimation",[b])}))},runAnimation:function(a){a.fireEvent(a,"beforeAnimation",[a]);a.A_draw||(a.variable.animation={type:0,time:0,queue:[]});a.processAnimation=!0;a.animation(a)},doSort:function(){var b=function(b,c){return(a.isArray(b)?b.zIndex||0:b.get("z_index"))>(a.isArray(c)?c.zIndex||0:c.get("z_index"))};a.sor(this.components,b);a.sor(this.oneways,b)},commonDraw:function(b,c){b.show=!1;b.redraw||(a.Assert.isTrue(b.Rendered,b.type+" has not rendered"),b.doSort());b.redraw=!0;!b.Animationed&&b.get("animation")?b.runAnimation(b):(b.segmentRect(),a.eachAll(b.components,function(a){a.draw(c)}),a.eachAll(b.components,function(a){a.last&&a.last(a)}),a.each(b.oneways,function(a){a.draw()}),b.show=!0)},plugin:function(a){var b=this._();a.inject(b);a._chart&&(a.Combination=!0,a.setUp());b.get("animation")||a.push("animation",!1);a.duration=b.duration;a._plugin=!0;b.register(a);b.plugins.push(a)},destroy:function(b){if(!b){b=b||this;b.segmentRect();for(var c in b.events)b.events[c]=[];b.T.unbound()}a.eachAll(b.components,function(a){a._plugin||a.destroy(a)});a.each(b.oneways,function(a){a.destroy(a)})},getTitle:function(){return this.title},getSubTitle:function(){return this.subtitle},getFootNote:function(){return this.footnote},getDrawingArea:function(){return{x:this.get("l_originx"),y:this.get("t_originy"),width:this.get("client_width"),height:this.get("client_height")}},create:function(c,d){if(c.get("fit")){var e=window.innerWidth,f=window.innerHeight,h=a.getDoc().body.style;h.padding="0px";h.margin="0px";h.overflow="hidden";c.push(c.W,e);c.push(c.H,f)}c.canvasid=a.uid(c.type);c.shellid="shell_"+c.canvasid;e=[];e.push("<div id='");e.push(c.shellid);e.push("' style='padding:0px;margin:0px auto;overflow:hidden;position:relative");c.get("background_wrap")&&(e.push(";background-color:"),e.push(c.get("background_color")),c.push("background_color",null));e.push(";'>");e.push("<canvas id= '");e.push(c.canvasid);e.push("' style='-webkit-text-size-adjust: none;'>");e.push("<p>Your browser does not support the canvas element</p></canvas>");e.push("</div>");d.innerHTML=e.join("");c.shell=a(c.shellid);c.T=c.target=new b(c.canvasid);c.size(c);c.Rendered=!0},setUp:function(){var a=this._();a.redraw=!1;a.T.clearRect();a.initialize()},load:function(a){var b=this._();b.push("data",a||[]);b.setUp();b._draw()},resize:function(b,c){var b=a.parseFloat(b),c=a.parseFloat(c),d=this._();d.Combination||(d.width=d.push(d.W,b),d.height=d.push(d.H,c),d.size(d));d.fireEvent(d,"resize",[b,c]);d.setUp();a.eachAll(d.plugins,function(a){a.Combination&&a.resize(b,c)});d.Combination||d.draw()},size:function(b){var c=a.ratio,d=b.pushIf(b.W,400),e=b.pushIf(b.H,300),f=b.T.canvas;b.shell.style.width=f.style.width=d+"px";b.shell.style.height=f.style.height=e+"px";f.width=(b.width=d)*c;f.height=(b.height=e)*c;1<c&&b.T.c.scale(c,c)},initialize:function(){var b=this._(),c=b.get("data"),d=b.get("render");b.push(b.X,null);b.push(b.Y,null);b.Combination?(a.apply(b.options,a.clone([b.W,b.H,"padding","border","client_height","client_width","minDistance","maxDistance","centerx","centery","l_originx","r_originx","t_originy","b_originy"],b.root.options,!0)),b.width=b.get(b.W),b.height=b.get(b.H),b.shell=b.root.shell,b.Rendered=!0):b.Rendered||d&&b.create(b,a(d));b.Rendered&&(a.isString(b.get("url"))&&!c?b.ajax.call(b,b.get("url"),function(a){b.push("data",a);b.initialize();b.draw()}):s.call(b,c||[],b))},eventOff:function(){this.stopEvent=!0},eventOn:function(){this.stopEvent=!1},oneWay:function(b){b.T.strokeStyle(!0,0,b.get("strokeStyle"),b.get("lineJoin"));b.processAnimation=b.get("animation");a.isFunction(b.get("doAnimation"))&&(b.doAnimation=b.get("doAnimation"));b.animationArithmetic=a.getAA(b.get("animation_timing_function"));var c=[b.components,b.oneways],d=b.variable.event,e=b.Combination,f=!b.get("turn_off_touchmove")&&!e,h=!a.touch&&b.get("default_mouseover_css")&&!e,j,k=a.touch?["touchstart","touchmove"]:["click","mousemove"];b.stopEvent=!1;b.A_draw=e&&b.processAnimation;a.register(b);e||a.each(k,function(c){b.T.addEvent(c,function(d){b.processAnimation||b.stopEvent||!b.show||d.targetTouches&&d.targetTouches.length!=1||b.fireEvent(b,c,[b,a.Event.fix(d)])})});b.on(k[0],function(b,e){a.eachAll(c,function(a){if(a._chart){if(a.fireEvent(a,k[0],[a,e])){d.click=true;return false}}else{var b=a.isMouseOver(e);if(b.valid){d.click=true;a.fireEvent(a,"click",[a,e,b]);return!e.stopPropagation}}});if(d.click){f&&e.event.preventDefault();d.click=false;return true}});if(!a.touch||f)if(b.on(k[1],function(b,e){j=false;a.eachAll(c,function(a){if(a._chart){if(a.fireEvent(a,k[1],[a,e])){j=true;return false}}else{var b=a.variable.event,c=a.isMouseOver(e);if(c.valid){j=j||a.atomic;if(!b.mouseover){b.mouseover=true;a.fireEvent(a,"mouseover",[a,e,c])}a.fireEvent(a,"mousemove",[a,e,c]);if(c.stop)return false}else if(b.mouseover){b.mouseover=false;a.fireEvent(a,"mouseout",[a,e,c])}return!e.stopPropagation}});if(d.mouseover){e.event.preventDefault();if(!j){d.mouseover=false;b.fireEvent(b,"mouseout",[b,e])}return d.mouseover}if(j){d.mouseover=j;b.fireEvent(b,"mouseover",[b,e])}}),h)b.on("mouseover",function(){b.T.css("cursor","pointer")}).on("mouseout",function(){b.T.css("cursor","default")});b.Combination||(b.bg=new a.Custom({z_index:-1,drawFn:function(){b.T.box(0,0,b.width,b.height,b.get("border"),b.get("f_color"),0,0,true)}}),b.duration=g(b.get("animation_duration")*a.FRAME/1E3));b.oneWay=a.emptyFn},originXY:function(a,b,c){var d=a.get("align");d==a.L?a.pushIf(a.X,b[0]):d==a.R?a.pushIf(a.X,b[1]):a.pushIf(a.X,b[2]);a.x=a.push(a.X,a.get(a.X)+a.get("offsetx"));a.y=a.push(a.Y,c[0]+a.get("offsety"));return{x:a.x,y:a.y}},percent:function(a,b){return this.get("showpercent")?(100*(a/(b||this.total||1))).toFixed(this.get("decimalsnum"))+"%":a},doActing:function(b,c,d,e,f){var h=!!b.get("communal_acting"),j=b.percent(c.value,c.total);b.push(h?"sub_option":"communal_acting",a.clone(b.get(h?"communal_acting":"sub_option"),!0));a.merge(b.get("sub_option"),c,d);b.push("sub_option.value",j);b.push("sub_option.value_",c.value);b.get("sub_option.tip.enable")&&(b.push("sub_option.tip.text",f||c.name+" "+j),b.push("sub_option.tip.name",c.name),b.push("sub_option.tip.index",e),b.push("sub_option.tip.value",c.value),b.push("sub_option.tip.total",c.total||b.total))},register:function(b){b.id=a.uid(b.type);this.components.push(b);return b},isE:function(){return!this.data.length},remove:function(b,c){c&&a.each(b.components,function(a,d){if(c.id==a.id)return b.components.splice(d,1),!1})},merge:function(b,c){var d=this._();a.isString(d.get(b))&&d.push(b,a.applyIf({text:d.get(b)},d.default_[b]));c&&""!=d.get(b).text&&c(d)},doConfig:function(){a.Chart.superclass.doConfig.call(this);var b=this._();b.destroy(b);b.oneways.length=0;b.oneWay(b);!1!==b.get("shadow")&&b.push("shadow",{color:b.get("shadow_color"),blur:b.get("shadow_blur"),offsetx:b.get("shadow_offsetx"),offsety:b.get("shadow_offsety")});a.apply(b.get("sub_option"),a.clone(["shadow","tip"],b.options,!0));b.push("communal_acting",0);if(!b.Combination){b.oneways.push(b.bg);b.push("r_originx",b.width-b.get("padding_right"));b.push("b_originy",b.height-b.get("padding_bottom"));b.applyGradient();var c=0,d=b.push("l_originx",b.get("padding_left")),e=b.push("t_originy",b.get("padding_top")),f=b.push("client_width",b.width-b.get("hpadding")),h;b.merge("subtitle");b.merge("title",function(){var h=""!=b.get("subtitle.text");c=h?b.get("title.height")+b.get("subtitle.height"):b.get("title.height");e=b.push("t_originy",e+c);b.push("title.originx",d);b.push("title.originy",b.get("padding_top"));b.push("title.maxwidth",f);b.pushIf("title.width",f);b.title=new a.Text(b.get("title"),b);b.oneways.push(b.title);h&&(b.push("subtitle.originx",d),b.push("subtitle.originy",b.get("padding_top")+b.get("title.height")),b.pushIf("subtitle.width",f),b.push("subtitle.maxwidth",f),b.subtitle=new a.Text(b.get("subtitle"),b),b.oneways.push(b.subtitle))});b.merge("footnote",function(){var e=b.get("footnote.height");c+=e;b.push("b_originy",b.get("b_originy")-e);b.push("footnote.originx",d);b.push("footnote.originy",b.get("b_originy"));b.push("footnote.maxwidth",f);b.pushIf("footnote.width",f);b.footnote=new a.Text(b.get("footnote"),b);b.oneways.push(b.footnote)});h=b.push("client_height",b.get(b.H)-b.get("vpadding")-b.pushIf("other_height",c));b.push("minDistance",m(f,h));b.push("maxDistance",k(f,h));b.push("centerx",d+f/2);b.push("centery",e+h/2)}b.isE()&&b.merge("empty",function(){b.push("empty.originx",b.get("centerx"));b.push("empty.originy",b.get("centery"));b.push("empty.textBaseline","middle");b.empty=new a.Text(b.get("empty"),b);b.oneways.push(b.empty)});b.get("legend.enable")&&(b.legend=new a.Legend(a.apply({maxwidth:b.get("client_width"),data:b.data},b.get("legend")),b),b.oneways.push(b.legend));b.push("sub_option.tip.wrap",b.push("tip.wrap",b.shell))}})})(c);c.Custom=c.extend(c.Component,{configure:function(){c.Custom.superclass.configure.apply(this,arguments);this.type="custom";this.set({drawFn:c.emptyFn,configFn:c.emptyFn,eventValid:void 0,animating_draw:!0})},doDraw:function(a){a.get("drawFn").call(a,a)},isEventValid:function(a,b){return c.isFunction(this.get("eventValid"))?this.get("eventValid").call(this,a,b):{valid:!1}},doConfig:function(){c.Custom.superclass.doConfig.call(this);var a=this._();a.A_draw=a.get("animating_draw");a.variable.animation={animating:!1,time:0};a.duration=0;a.get("configFn").call(a,a)}});c.Scale=c.extend(c.Component,{configure:function(){c.Scale.superclass.configure.apply(this,arguments);this.type="scale";this.set({position:"left",which:"h",basic_value:0,scale2grid:!0,distance:void 0,start_scale:0,end_scale:void 0,min_scale:void 0,max_scale:void 0,scale_space:void 0,scale_enable:!0,scale_size:1,scale_width:4,scale_color:"#333333",scaleAlign:"center",labels:[],label:{},text_space:6,textAlign:"left",decimalsnum:0,join_style:"none",join_size:2});this.registerEvent("parseText")},isEventValid:function(){return{valid:!1}},getScale:function(a){a=[a.get("basic_value"),a.get("start_scale"),a.get("end_scale"),a.get("end_scale")-a.get("start_scale"),0];a[4]=c.inRange(a[1],a[2]+1,a[0])||c.inRange(a[2]-1,a[1],a[0]);return{range:a[4],basic:a[4]?(a[0]-a[1])/a[3]:0,start:a[4]?a[0]:a[1],end:a[2],distance:a[3]}},doDraw:function(a){a.get("scale_enable")&&c.each(a.items,function(b){a.T.line(b.x0,b.y0,b.x1,b.y1,a.get("scale_size"),a.get("scale_color"),!1)});c.each(a.labels,function(a){a.draw()})},doLayout:function(a,b,d){d.get("scale_enable")&&c.each(d.items,function(c){c.x0+=a;c.y0+=b;c.x1+=a;c.y1+=b});c.each(d.labels,function(c){c.doLayout(a,b,0,c)})},doConfig:function(){c.Scale.superclass.doConfig.call(this);var a=this._(),b=Math.abs,d=a.get("labels").length,e=d-1,f=a.get("min_scale"),g=a.get("max_scale"),h=a.get("scale_space"),j=a.get("end_scale"),k=a.get("start_scale");a.items=[];a.labels=[];if(0==d){e=5;k>f&&(k=a.push("start_scale",c.floor(f)));if(!c.isNumber(j)||j<g)j=c.ceil(g),j=a.push("end_scale",!j&&!k?1:j);f=b(j-k);if(h&&b(h)<b(f))e=b(Math.ceil(f/h));else{g=f.toString();h=g.indexOf(".")+1;b=10;for(g=(0<h?/^0\.0*([1-9])$/:/^([1-9])0*$/).exec(g);0<h;)h--,b*=10;g&&g[1]&&(e=parseInt(g[1]));e=1==e?5:e;e=8==e||2==e?4:e;e=9==e?3:e;h=a.push("scale",f*b/e/b)}parseInt(h)!=h&&0==a.get("decimalsnum")&&a.push("decimalsnum",(h+"").substring((h+"").indexOf(".")+1).length)}a.push("distanceOne",a.get("valid_distance")/(e?e:1));var m,n,p,l=j=g=b=f=0,r=0;m=a.get("scale_width");n=m/2;p=a.get("scaleAlign");var v=a.get("position"),s=a.get("text_space"),w="",i=a.get("coo").get("axis.width");a.push("which",a.get("which").toLowerCase());a.isH="h"==a.get("which");a.isH?(p==a.O?j=-m:p==a.C?(j=-n,b=n):b=m,v==a.O?(r=-s-i[0],w=a.B):(r=s+i[2],w=a.O),v=a.C):(p==a.L?g=-m:p==a.C?(g=-n,f=n):f=m,w="middle",v==a.R)?(v=a.L,l=s+i[1]):(v=a.R,l=-s-i[3]);for(s=0;s<=e;s++)m=d?a.get("labels")[s]:(h*s+k).toFixed(a.get("decimalsnum")),n=a.isH?a.get("valid_x")+s*a.get("distanceOne"):a.x,p=a.isH?a.y:a.get("valid_y")+a.get("valid_distance")-s*a.get("distanceOne"),a.items.push({x:n,y:p,x0:n+g,y0:p+j,x1:n+f,y1:p+b}),a.get("label")&&a.labels.push(new c.Text(c.applyIf(c.apply(a.get("label"),c.merge({text:m,x:n,y:p,originx:n+l,originy:p+r},a.fireEvent(a,"parseText",[m,n+l,p+r,s,e==s]))),{textAlign:v,textBaseline:w}),a))}});c.Coordinate={coordinate_:function(a){var b=this._(),d=b.get("coordinate"),e=b.get("scaleAlign");if(d.ICHARTJS_OBJECT)return b.x=b.push(b.X,d.x),b.y=b.push(b.Y,d.y),b.ILLUSIVE_COO=!0,d.refresh(b.get("minValue"),b.get("maxValue"),e),a&&a(d.get("_valid_width"),d.get("_valid_height")),d;var f=c.parsePercent,d=b.get("coordinate.scale"),g=b.push("coordinate._width",f(b.get("coordinate.width")||"85%",Math.floor(b.get("client_width")))),h=b.push("coordinate._height",f(b.get("coordinate.height")||"85%",Math.floor(b.get("client_height")))-(b.is3D()?(b.get("coordinate.pedestal_height")||22)+(b.get("coordinate.board_deep")||20):0)),j=b.push("coordinate._valid_height",f(b.get("coordinate.valid_height"),h)),f=b.push("coordinate._valid_width",f(b.get("coordinate.valid_width"),g));b.originXY(b,[b.get("l_originx"),b.get("r_originx")-g,b.get("centerx")-g/2],[b.get("centery")-h/2]);b.set({coordinate:{originx:b.x,originy:b.y,id:"coordinate"}});a&&a(f,j);c.isObject(d)&&(d=[d]);if(c.isArray(d)){var k="stacked"!=b.dataType;c.each(d,function(a){b.get("percent")&&a.position==e&&(a=c.apply(a,{start_scale:0,end_scale:100,scale_space:10,listeners:{parseText:function(a){return{text:a+"%"}}}}));a.min_scale=a.max_scale=void 0;if(!a.start_scale||k&&!a.force_scale&&a.start_scale>b.get("minValue"))a.min_scale=b.get("minValue");if(!a.end_scale||k&&!a.force_scale&&a.end_scale<b.get("maxValue"))a.max_scale=b.get("maxValue")})}else b.push("coordinate.scale",{position:e,scaleAlign:e,max_scale:b.get("maxValue"),min_scale:b.get("minValue")});b.is3D()&&b.set({coordinate:{xAngle_:b.get("xAngle_"),yAngle_:b.get("yAngle_"),zHeight:b.get("zHeight")*b.get("bottom_scale")}});b.remove(b,b.coo);if(!b.isE())return b.register(new (c[b.is3D()?"Coordinate3D":"Coordinate2D"])(b.get("coordinate"),b))}};c.Coordinate2D=c.extend(c.Component,{configure:function(){c.Coordinate2D.superclass.configure.apply(this,arguments);this.type="coordinate2d";this.set({sign_size:12,sign_space:5,scale:[],width:"85%",height:"85%",valid_width:"100%",valid_height:"100%",grid_line_width:1,grid_color:"#dbe1e1",gridHStyle:{},gridVStyle:{},gridlinesVisible:!0,scale2grid:!0,grids:void 0,ignoreOverlap:!0,ignoreEdge:!1,xlabel:"",ylabel:"",background_color:0,striped:!0,striped_direction:"v",striped_factor:0.01,crosshair:{enable:!1},z_index:-1,axis:{enable:!0,color:"#666666",width:1}});this.scale=[];this.gridlines=[]},refresh:function(a,b,d){c.each(this.scale,function(c){if(c.get("position")==d){var f;if(!c.get("force_scale")||c.get("end_scale")<b)c.push("max_scale",c.push("end_scale",b)),f=!0;if(!c.get("force_scale")||c.get("start_scale")>a)c.push("min_scale",c.push("start_scale",a)),f=!0;f&&c.doConfig();return!1}})},getScaleObj:function(a,b){for(var c=this._(),e=0;e<c.scale.length;e++)if(c.scale[e].get("position")==a)return c.scale[e];if(!b)return a=a==c.L?c.R:a==c.R?c.L:a==c.O?c.B:c.O,c.getScaleObj(a,!0);throw Error("InValidScale");},getScale:function(a,b){var c=this.getScaleObj(a,b);return c.getScale(c)},isEventValid:function(a,b){return{valid:a.x>b.x&&a.x<b.x+b.width&&a.y<b.y+b.height&&a.y>b.y}},doDraw:function(a){a.T.box(a.x,a.y,a.width,a.height,0,a.get("f_color"));if(a.get("striped")){var b,d,e=!1;a.get("axis.width");var f=c.dark(a.get("background_color"),a.get("striped_factor"),0)}var g="v"==a.get("striped_direction");c.each(a.gridlines,function(c){a.get("striped")&&(e&&(g?a.T.box(c.x1,c.y1+c.width,c.x2-c.x1,d-c.y1-c.width,0,f):a.T.box(b+c.width,c.y2,c.x1-b,c.y1-c.y2,0,f)),b=c.x1,d=c.y1,e=!e)});c.each(a.gridlines,function(b){b.overlap||(b.solid?a.T.line(b.x1,b.y1,b.x2,b.y2,b.width,b.color):a.T.dotted(b.x1,b.y1,b.x2,b.y2,b.width,b.color,b.size,b.fator))});a.T.box(a.x,a.y,a.width,a.height,a.get("axis"),!1,a.get("shadow"),!0);c.each(a.scale,function(a){a.draw()})},destroy:function(){c.Coordinate2D.superclass.destroy.call(this);this.crosshair&&this.crosshair.destroy()},doCrosshair:function(a){a.get("crosshair.enable")&&!a.crosshair&&(a.push("crosshair.wrap",a.root.shell),a.push("crosshair.height",a.height),a.push("crosshair.width",a.width),a.push("crosshair.top",a.y),a.push("crosshair.left",a.x),a.crosshair=new c.CrossHair(a.get("crosshair"),a))},doConfig:function(){c.Coordinate2D.superclass.doConfig.call(this);var a=this._();a.atomic=!1;a.width=a.get("_width");a.height=a.get("_height");a.valid_width=a.get("_valid_width");a.valid_height=a.get("_valid_height");a.get("gradient")&&c.isString(a.get("f_color"))&&a.push("f_color",a.T.avgLinearGradient(a.x,a.y,a.x,a.y+a.height,[a.get("dark_color"),a.get("light_color")]));if(a.get("axis.enable")){var b=a.get("axis.width");c.isArray(b)||a.push("axis.width",[b,b,b,b])}else a.push("axis.width",[0,0,0,0]);a.doCrosshair(a);var d,e=(b=!(!a.get("gridlinesVisible")||!a.get("grids")))&&!!a.get("grids.horizontal"),f=b&&!!a.get("grids.vertical"),g=a.height,h=a.width,j=a.valid_width,k=a.valid_height,b=a.get("gridlinesVisible")&&a.get("scale2grid")&&!(e&&f),m=a.push("x_start",a.x+(h-j)/2),n=a.push("y_start",a.y+(g-k)/2),p=a.get("axis.width"),l=a.get("scale");a.push("x_end",a.x+(h+j)/2);a.push("y_end",a.y+(g+k)/2);l=c.isArray(l)?l:a.push("scale",c.isObject(l)?[l]:[]);c.each(l,function(b){d=(d=b.position)||a.L;d=d.toLowerCase();b[a.X]=a.x;b.coo=a;b[a.Y]=a.y;b.valid_x=m;b.valid_y=n;b.position=d;d==a.O?(b.which="h",b.distance=h,b.valid_distance=j):d==a.R?(b.which="v",b.distance=g,b.valid_distance=k,b[a.X]+=h,b.valid_x+=j):d==a.B?(b.which="h",b.distance=h,b.valid_distance=j,b[a.Y]+=g,b.valid_y+=k):(b.which="v",b.distance=g,b.valid_distance=k);b.label=c.applyIf(b.label||{},a.get("label"));a.scale.push(new c.Scale(b,a.root))},a);var r=a.push("ignoreOverlap",a.get("ignoreOverlap")&&a.get("axis.enable")||a.get("ignoreEdge"));if(r)var v=a.get("ignoreEdge")?function(b,c,d){return"v"==b?d==a.y||d==a.y+g:c==a.x||c==a.x+b}:function(b,c,d){return"v"==b?d==a.y&&0<p[0]||d==a.y+g&&0<p[2]:c==a.x&&0<p[3]||c==a.x+h&&0<p[1]};var l={solid:!0,size:10,fator:1,width:a.get("grid_line_width"),color:a.get("grid_color")},s=c.applyIf(a.get("gridHStyle"),l),w=c.applyIf(a.get("gridVStyle"),l);if(b){var i,t,x;c.each(a.scale,function(b){x=b.get("position");if(!c.isFalse(b.get("scale2grid"))&&!(e&&"v"==b.get("which")||f&&"h"==b.get("which")))i=t=0,x==a.O?t=g:x==a.R?i=-h:x==a.B?t=-g:i=h,c.each(b.items,function(d){r&&a.gridlines.push(c.applyIf({overlap:v.call(a,b.get("which"),d.x,d.y),x1:d.x,y1:d.y,x2:d.x+i,y2:d.y+t},b.isH?w:s))})})}if(f){var u=a.get("grids.vertical"),b=h/u.value,l=u.value;"given_value"==u.way&&(l=b,b=u.value,b=b>h?h:b);for(u=0;u<=l;u++)r&&a.gridlines.push(c.applyIf({overlap:v.call(a,"h",a.x+u*b,a.y),x1:a.x+u*b,y1:a.y,x2:a.x+u*b,y2:a.y+g,H:!1,width:w.width,color:w.color},w))}if(e){u=a.get("grids.horizontal");b=g/u.value;l=u.value;"given_value"==u.way&&(l=b,b=u.value,b=b>g?g:b);for(u=0;u<=l;u++)r&&a.gridlines.push(c.applyIf({overlap:v.call(a,"v",a.x,a.y+u*b),x1:a.x,y1:a.y+u*b,x2:a.x+h,y2:a.y+u*b,H:!0,width:s.width,color:s.color},s))}}});c.Coordinate3D=c.extend(c.Coordinate2D,{configure:function(){c.Coordinate3D.superclass.configure.apply(this,arguments);this.type="coordinate3d";this.dimension=c._3D;this.set({xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,zHeight:0,pedestal_height:22,board_deep:20,left_board:!0,gradient:!0,color_factor:0.18,ignoreEdge:!0,striped:!1,grid_color:"#a4ad96",background_color:"#d6dbd2",shadow_offsetx:4,shadow_offsety:2,wall_style:[],axis:{enable:!1}})},doDraw:function(a){var b=a.width,d=a.height,e=a.get("xAngle_"),f=a.get("yAngle_"),g=a.get("zHeight"),h=a.get("z_offx"),j=a.get("z_offy");a.get("pedestal_height")&&a.T.cube3D(a.x,a.y+d+a.get("pedestal_height"),e,f,!1,b,a.get("pedestal_height"),3*g/2,a.get("axis.enable"),a.get("axis.width"),a.get("axis.color"),a.get("bottom_style"));a.get("board_deep")&&a.T.cube3D(a.x+h,a.y+d-j,e,f,!1,b,d,a.get("board_deep"),a.get("axis.enable"),a.get("axis.width"),a.get("axis.color"),a.get("board_style"));a.T.cube3D(a.x,a.y+d,e,f,!1,b,d,g,a.get("axis.enable"),a.get("axis.width"),a.get("axis.color"),a.get("wall_style"));c.each(a.gridlines,function(b){b.solid?(a.get("left_board")&&a.T.line(b.x1,b.y1,b.x1+h,b.y1-j,b.width,b.color),a.T.line(b.x1+h,b.y1-j,b.x2+h,b.y2-j,b.width,b.color)):(a.get("left_board")&&a.T.dotted(b.x1,b.y1,b.x1+h,b.y1-j,b.width,b.color,b.size,b.fator),a.T.dotted(b.x1+h,b.y1-j,b.x2+h,b.y2-j,b.width,b.color,b.size,b.fator))});c.each(a.scale,function(a){a.draw()})},doConfig:function(){c.Coordinate3D.superclass.doConfig.call(this);for(var a=this._(),b=a.get("wall_style"),d=a.get("background_color")||"#d6dbd2",e=a.height,f=a.width,g=a.get("color_factor"),h=a.push("z_offx",a.get("xAngle_")*a.get("zHeight")),j=a.push("z_offy",a.get("yAngle_")*a.get("zHeight"));6>b.length;)b.push({color:d});a.get("left_board")||(b[2]=!1,c.each(a.scale,function(a){a.doLayout(h,-j,a)}));a.push("bottom_style",[{color:a.get("shadow_color"),shadow:a.get("shadow")},!1,!1,{color:b[3].color},!1,{color:b[3].color}]);a.push("board_style",[!1,!1,!1,{color:b[4].color},{color:b[5].color},!1]);a.get("gradient")&&(c.isString(b[0].color)&&(b[0].color=a.T.avgLinearGradient(a.x,a.y+e,a.x+f,a.y+e,[c.dark(b[0].color,g/2+0.06),c.dark(b[0].color,g/2+0.06)])),c.isString(b[1].color)&&(b[1].color=a.T.avgLinearGradient(a.x+h,a.y-j,a.x+h,a.y+e-j,[c.dark(b[1].color,g),c.light(b[1].color,g)])),c.isString(b[2].color)&&(b[2].color=a.T.avgLinearGradient(a.x,a.y,a.x,a.y+e,[c.light(b[2].color,g/3),c.dark(b[2].color,g)])),a.get("bottom_style")[5].color=a.T.avgLinearGradient(a.x,a.y+e,a.x,a.y+e+a.get("pedestal_height"),[c.light(b[3].color,g/2+0.06),c.dark(b[3].color,g/2,0)]));a.push("wall_style",[b[0],b[1],b[2]])}});c.Rectangle=c.extend(c.Component,{configure:function(){c.Rectangle.superclass.configure.apply(this,arguments);this.type="rectangle";this.set({width:0,height:0,value_space:4,value:"",actived:!0,label:{},name:"",tipAlign:"top",valueAlign:"top",shadow_blur:3,shadow_offsety:-1});this.atomic=!0;this.registerEvent("parseText");this.label=null},last:function(a){a.label&&a.get("actived")&&a.label.draw()},doDraw:function(a){a.get("actived")&&a.drawRectangle()},doConfig:function(){c.Rectangle.superclass.doConfig.call(this);var a=this._(),b=a.variable.event,d=a.get("valueAlign");c.taylor.light(a,b);a.width=a.get(a.W);a.height=a.get(a.H);var b=a.push("centerx",a.x+a.width/2),e=a.push("centery",a.y+a.height/2),f=a.C,g="middle",h=a.get("value_space");d==a.L?(f=a.R,b=a.x-h):d==a.R?(f=a.L,b=a.x+a.width+h):d==a.B?(e=a.y+a.height+h,g=a.O):d==a.O&&(e=a.y-h,g=a.B);a.get("label")&&(a.push("label.originx",b),a.push("label.originy",e),a.push("label.text",a.push("value",a.fireString(a,"parseText",[a,a.get("value")],a.get("value")))),c.applyIf(a.get("label"),{textAlign:f,textBaseline:g,color:a.get("color")}),a.label=new c.Text(a.get("label"),a));a.get("tip.enable")&&("follow"!=a.get("tip.showType")&&a.push("tip.invokeOffsetDynamic",!1),a.tip=new c.Tip(a.get("tip"),a))}});c.Rectangle2D=c.extend(c.Rectangle,{configure:function(){c.Rectangle2D.superclass.configure.apply(this,arguments);this.type="rectangle2d";this.set({shadow_offsety:-2})},drawRectangle:function(){var a=this._();a.T.box(a.get(a.X),a.get(a.Y),a.get(a.W),a.get(a.H),a.get("border"),a.get("f_color"),a.get("shadow"))},isEventValid:function(a,b){return{valid:b.get("actived")&&a.x>b.x&&a.x<b.x+b.width&&a.y<b.y+b.height&&a.y>b.y}},tipInvoke:function(){var a=this._();return function(b,c){return{left:a.tipX(b,c),top:a.tipY(b,c)}}},doConfig:function(){c.Rectangle2D.superclass.doConfig.call(this);var a=this._(),b=a.get("tipAlign");b==a.L||b==a.R?a.tipY=function(b,c){return a.get("centery")-c/2}:a.tipX=function(b){return a.get("centerx")-b/2};b==a.L?a.tipX=function(b){return a.x-a.get("value_space")-b}:b==a.R?a.tipX=function(){return a.x+a.width+a.get("value_space")}:a.tipY=b==a.B?function(){return a.y+a.height+3}:function(b,c){return a.y-c-3};a.applyGradient()}});c.Rectangle3D=c.extend(c.Rectangle,{configure:function(){c.Rectangle3D.superclass.configure.apply(this,arguments);this.type="rectangle3d";this.dimension=c._3D;this.set({zHeight:void 0,xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,shadow_offsetx:2})},drawRectangle:function(){var a=this._();a.T.cube(a.get(a.X),a.get(a.Y),a.get("xAngle_"),a.get("yAngle_"),a.get(a.W),a.get(a.H),a.get("zHeight"),a.get("f_color"),a.get("border.enable"),a.get("border.width"),a.get("light_color"),a.get("shadow"))},isEventValid:function(a,b){return{valid:b.get("actived")&&a.x>b.x&&a.x<b.x+b.get(b.W)&&a.y<b.y+b.get(b.H)&&a.y>b.y}},tipInvoke:function(){var a=this._();return function(b,c){return{left:a.topCenterX-b/2,top:a.topCenterY-c}}},doConfig:function(){c.Rectangle3D.superclass.doConfig.call(this);var a=this._();a.pushIf("zHeight",a.get(a.W));a.topCenterX=a.x+(a.get(a.W)+a.get(a.W)*a.get("xAngle_"))/2;a.topCenterY=a.y-a.get(a.W)*a.get("yAngle_")/2-a.get("value_space");a.get("valueAlign")==a.O&&a.label&&(a.label.push("textx",a.topCenterX),a.label.push("texty",a.topCenterY))}});c.Sector=c.extend(c.Component,{configure:function(){c.Sector.superclass.configure.apply(this,arguments);this.type="sector";this.set({value:"",name:"",ignored:!1,counterclockwise:!1,startAngle:0,middleAngle:0,endAngle:0,totalAngle:0,bound_event:"click",expand:!1,donutwidth:0,mutex:!1,increment:void 0,label_length:void 0,gradient_mode:"RadialGradientOutIn",mini_label_threshold_angle:15,mini_label:!1,label:{},rounded:!1});this.atomic=!0;this.registerEvent("changed","parseText");this.tip=this.label=null},bound:function(){this.expanded||this.toggle()},rebound:function(){this.expanded&&this.toggle()},toggle:function(){this.fireEvent(this,this.get("bound_event"),[this])},getDimension:function(){var a=this._();return{x:a.x,x:a.y,startAngle:a.get("startAngle"),middleAngle:a.get("middleAngle"),endAngle:a.get("endAngle")}},doDraw:function(a){a.get("ignored")||(a.label&&!a.get("mini_label")&&a.label.draw(),0<a.get("totalAngle")&&a.drawSector(),a.label&&a.get("mini_label")&&a.label.draw())},doText:function(a,b,d){a.push("label.originx",b);a.push("label.originy",d);a.push("label.textBaseline","middle");a.label=new c.Text(a.get("label"),a)},doLabel:function(a,b,d,e,f,g,h,j){a.push("label.originx",b);a.push("label.originy",d);a.push("label.quadrantd",e);a.push("label.line_points",f);a.push("label.labelx",g);a.push("label.labely",h);a.push("label.smooth",j);a.push("label.angle",a.get("middleAngle")%(2*Math.PI));a.label=new c.Label(a.get("label"),a)},isLabel:function(){return this.get("label")&&!this.get("mini_label")},doConfig:function(){c.Sector.superclass.doConfig.call(this);var a=this._(),b=a.variable.event,d=a.get("label"),e=a.get("bound_event"),f;a.get("rounded")?(a.push("startAngle",0),a.push("endAngle",2*Math.PI)):(c.taylor.light(a,b),a.push("totalAngle",a.get("endAngle")-a.get("startAngle")),d&&(a.get("mini_label")&&(a.get("mini_label_threshold_angle")*Math.PI/180>a.get("totalAngle")?a.push("mini_label",!1):c.apply(a.get("label"),a.get("mini_label"))),a.push("label.text",a.fireString(a,"parseText",[a,a.get("label.text")],a.get("label.text"))),a.pushIf("label.border.color",a.get("border.color")),a.push("label.scolor",a.get("background_color"))),a.variable.event.status=a.expanded=a.get("expand"),a.get("tip.enable")&&("follow"!=a.get("tip.showType")&&a.push("tip.invokeOffsetDynamic",!1),a.tip=new c.Tip(a.get("tip"),a)),b.poped=!1,a.on(e,function(){b.poped=true;a.expanded=!a.expanded;a.redraw(e);b.poped=false}),a.on("beforedraw",function(c,h){if(h==e){f=false;a.x=a.get(a.X);a.y=a.get(a.Y);if(a.expanded)if(a.get("mutex")&&!b.poped){a.expanded=false;f=true}else{a.x=a.x+a.get("inc_x");a.y=a.y-a.get("inc_y")}if(b.status!=a.expanded){a.fireEvent(a,"changed",[a,a.expanded]);f=true;b.status=a.expanded}d&&f&&a.label.doLayout(a.get("inc_x")*(a.expanded?1:-1),-a.get("inc_y")*(a.expanded?1:-1),2,a.label)}return true}))}});c.Sector2D=c.extend(c.Sector,{configure:function(){c.Sector2D.superclass.configure.apply(this,arguments);this.type="sector2d";this.set({radius:0})},drawSector:function(){this.T.sector(this.x,this.y,this.r,this.get("donutwidth"),this.get("startAngle"),this.get("endAngle"),this.get("f_color"),this.get("border.enable"),this.get("border.width"),this.get("border.color"),this.get("shadow"),this.get("counterclockwise"))},isEventValid:function(a,b){if(!b.get("ignored")){if(b.isLabel()&&b.label.isEventValid(a,b.label).valid)return{valid:!0};var d=c.distanceP2P(b.x,b.y,a.x,a.y),e=b.get("donutwidth");if(b.r<d||e&&b.r-e>d)return{valid:!1};if(c.angleInRange(b.get("startAngle"),b.get("endAngle"),c.atan2Radian(b.x,b.y,a.x,a.y)))return{valid:!0}}return{valid:!1}},tipInvoke:function(){var a=this,b=a.get("middleAngle"),d=c.quadrantd(b);return function(e,f){var g=c.p2Point(a.x,a.y,b,0.8*a.r);return{left:1<=d&&2>=d?g.x-e:g.x,top:2<=d?g.y-f:g.y}}},doConfig:function(){c.Sector2D.superclass.doConfig.call(this);var a=this._();a.r=a.get("radius");a.get("donutwidth")>a.r&&a.push("donutwidth",0);a.applyGradient(a.x-a.r,a.y-a.r,1.8*a.r,1.8*a.r);var b=a.get("middleAngle"),d=a.pushIf("increment",c.lowTo(5,a.r/10));a.push("inc_x",d*Math.cos(2*Math.PI-b));a.push("inc_y",d*Math.sin(2*Math.PI-b));d*=2;if(a.get("label"))if(a.get("mini_label"))P2=c.p2Point(a.x,a.y,b,a.get("donutwidth")?a.r-a.get("donutwidth")/2:5*a.r/8),a.doText(a,P2.x,P2.y);else{var e=c.quadrantd(b),f=c.p2Point(a.x,a.y,b,a.r+d),g=c.p2Point(a.x,a.y,b,a.r+0.6*d);P2=c.p2Point(a.x,a.y,b,a.r);a.doLabel(a,P2.x,P2.y,e,[{x:P2.x,y:P2.y},{x:g.x,y:g.y},{x:f.x,y:f.y}],f.x,f.y,0.4*d)}}});c.Sector3D=c.extend(c.Sector,{configure:function(){c.Sector3D.superclass.configure.apply(this,arguments);this.type="sector3d";this.dimension=c._3D;this.set({semi_major_axis:0,semi_minor_axis:0,cylinder_height:0});this.proxy=!0},isEventValid:function(a,b){if(!b.get("ignored")){if(b.isLabel()&&b.label.isEventValid(a,b.label).valid)return{valid:!0};if(!c.inEllipse(a.x-b.x,a.y-b.y,b.a,b.b))return{valid:!1};if(c.angleZInRange(b.sA,b.eA,c.atan2Radian(b.x,b.y,a.x,a.y)))return{valid:!0}}return{valid:!1}},p2p:function(a,b,c,e){return{x:a+this.a*Math.cos(c)*e,y:b+this.b*Math.sin(c)*e}},tipInvoke:function(){var a=this,b=a.get("middleAngle"),d=c.quadrantd(b);return function(c,f){var g=a.p2p(a.x,a.y,b,0.6);return{left:2<=d&&3>=d?g.x-c:g.x,top:3<=d?g.y-f:g.y}}},doConfig:function(){c.Sector3D.superclass.doConfig.call(this);var a=this._(),b=a.get("counterclockwise"),d=a.get("middleAngle");a.a=a.get("semi_major_axis");a.b=a.get("semi_minor_axis");a.h=a.get("cylinder_height");c.Assert.isTrue(0<=a.a*a.b,"major&minor");var e=2*Math.PI,f=function(d){for(;0>d;)d+=e;return Math.abs(c.atan2Radian(0,0,a.a*Math.cos(d),b?-a.b*Math.sin(d):a.b*Math.sin(d)))},g=a.pushIf("increment",c.lowTo(5,a.a/10));a.sA=f.call(a,a.get("startAngle"));a.eA=f.call(a,a.get("endAngle"));a.mA=f.call(a,d);a.push("inc_x",g*Math.cos(e-a.mA));a.push("inc_y",g*Math.sin(e-a.mA));g*=2;if(a.get("label"))if(a.get("mini_label"))g=a.p2p(a.x,a.y,d,0.5),a.doText(a,g.x,g.y);else{var f=c.quadrantd(d),h=a.p2p(a.x,a.y,d,g/a.a+1),j=a.p2p(a.x,a.y,d,0.6*g/a.a+1),d=a.p2p(a.x,a.y,d,1);a.doLabel(a,d.x,d.y,f,[{x:d.x,y:d.y},{x:j.x,y:j.y},{x:h.x,y:h.y}],h.x,h.y,0.4*g)}}});c.Pie=c.extend(c.Chart,{configure:function(){c.Pie.superclass.configure.call(this);this.type="pie";this.set({radius:"100%",offset_angle:0,separate_angle:0,bound_event:"click",counterclockwise:!1,intellectLayout:!0,layout_distance:4,pop_animate:!1,mutex:!1,increment:void 0,sub_option:{label:{}}});this.registerEvent("bound","rebound");this.sectors=[];this.components.push(this.sectors);this.ILLUSIVE_COO=!0},toggle:function(a){this.sectors[a||0].toggle()},bound:function(a){this.sectors[a||0].bound()},rebound:function(a){this.sectors[a||0].rebound()},getSectors:function(){return this.sectors},doAnimation:function(a,b,d){var e=0,f=d.oA;c.each(d.sectors,function(c){e=d.animationArithmetic(a,0,c.get("totalAngle"),b);c.push("startAngle",f);c.push("endAngle",f+=e);d.is3D()||c.drawSector()});d.is3D()&&d.proxy.drawSector()},parse:function(a){c.each(a.data,function(b,c){a.doParse(a,b,c)},a);a.localizer(a)},doParse:function(a,b,c){var e=b.name+" "+a.percent(b.value);a.doActing(a,b,null,c,e);a.push("sub_option.id",c);a.get("sub_option.label")&&a.push("sub_option.label.text",e);a.push("sub_option.listeners.changed",function(b,c){a.fireEvent(a,c?"bound":"rebound",[a,b.get("name")])});a.sectors.push(a.doSector(a,b))},doSector:function(a){return new c[a.sub](a.get("sub_option"),a)},dolayout:function(a,b,d,e,f,g){if(a.is3D()?c.inEllipse(a.get(a.X)-b,a.topY-d,a.a,a.b):c.distanceP2P(a.get(a.X),a.topY,b,d)<a.r)d=a.topY-d,e.push("labelx",a.get(a.X)+(2*Math.sqrt(a.r*a.r-d*d)+f)*(0==g||3==g?1:-1)),e.localizer(e)},localizer:function(a){if(a.get("intellectLayout")){var b=[],d=[],e=a.get("layout_distance"),f,g,h;c.each(a.sectors,function(a){a.isLabel()&&b.push(a.label)});c.sor(b,function(a,b){return 0<Math.abs(Math.sin(a.get("angle")))-Math.abs(Math.sin(b.get("angle")))});c.each(b,function(b){c.each(d,function(c){g=c.labelx;h=c.labely;if(b.labely<=h&&h-b.labely-1<b.get(a.H)||b.labely>h&&b.labely-h-1<c.get(a.H))if(b.labelx<=g&&g-b.labelx<b.get(a.W)||b.labelx>g&&b.labelx-g<c.get(a.W))f=b.get("quadrantd"),b.push("labely",b.get("labely")+h-b.labely+(b.get(a.H)+e)*(1<f?-1:1)),b.localizer(b),a.dolayout(a,b.get("labelx"),b.get("labely")+b.get(a.H)/2*(2>f?-1:1),b,e,f)},a);d.push(b)})}},doConfig:function(){c.Pie.superclass.doConfig.call(this);var a=this._(),b,d=a.get("radius"),e=a.get("sub_option.label")?0.35:0.44,f=2*Math.PI;a.sub=a.is3D()?"Sector3D":"Sector2D";a.sectors.zIndex=a.get("z_index");a.sectors.length=0;a.oA=c.angle2Radian(a.get("offset_angle"))%f;a.is3D()&&(e+=0.06);var g=a.data.length,h=c.angle2Radian(c.between(0,90,a.get("separate_angle"))),j=f-h,h=h/g,k=a.oA+h,m=k;0==a.total&&(b=1/g);c.each(a.data,function(c,d){k+=(b||c.value/a.total)*j;d==g-1&&(k=f+a.oA-1.0E-6);c.startAngle=m;c.endAngle=k;c.totalAngle=k-m;c.middleAngle=(m+k)/2;m=k+h},a);a.r=d=c.parsePercent(d,Math.floor(a.get("minDistance")*e));a.topY=a.originXY(a,[d+a.get("l_originx"),a.get("r_originx")-d,a.get("centerx")],[a.get("centery")]).y;c.apply(a.get("sub_option"),c.clone([a.X,a.Y,"bound_event","mutex","increment"],a.options))}});c.Pie2D=c.extend(c.Pie,{configure:function(){c.Pie2D.superclass.configure.call(this);this.type="pie2d"},doConfig:function(){c.Pie2D.superclass.doConfig.call(this);var a=this._();a.push("sub_option.radius",a.r);a.parse(a)}});c.register("Pie2D");c.Pie3D=c.extend(c.Pie,{configure:function(){c.Pie3D.superclass.configure.apply(this,arguments);this.type="pie3d";this.dimension=c._3D;this.set({zRotate:45,yHeight:30});this.positive=!0},doSector:function(a,b){a.push("sub_option.cylinder_height",b.cylinder_height?b.cylinder_height*a.get("zRotate_"):a.get("cylinder_height"));return new c[a.sub](a.get("sub_option"),a)},one:function(a){var b,d,e=[],f=a.get("counterclockwise"),g=function(a,b){return 1+Math.sin(b?a+Math.PI:a)},h;lay=function(a,d,e,f){h=c.quadrantd(d);(a&&(0==h||3==h)||!a&&(2==h||1==h))&&b.push({g:d,z:d==e,x:f.x,y:f.y,a:f.a,b:f.b,color:c.dark(f.get("background_color")),h:f.h,F:f})};a.proxy=new c.Custom({z_index:a.get("z_index")+1,drawFn:function(){this.drawSector();e=[];c.each(a.sectors,function(a){a.get("label")&&(a.expanded?e.push(a.label):a.label.draw())});c.each(e,function(a){a.draw()})}});a.proxy.drawSector=function(){c.each(a.sectors,function(b){a.T.ellipse(b.x,b.y+b.h,b.a,b.b,b.get("startAngle"),b.get("endAngle"),0,b.get("border.enable"),b.get("border.width"),b.get("border.color"),b.get("shadow"),f,!0)},a);b=[];d=[];c.each(a.sectors,function(a){lay(f,a.get("startAngle"),a.get("endAngle"),a);lay(!f,a.get("endAngle"),a.get("startAngle"),a);d=d.concat(c.visible(a.get("startAngle"),a.get("endAngle"),a))},a);c.sor(b,function(a,b){var c=g(a.g)-g(b.g);return 0==c?a.z:0<c});c.each(b,function(b){a.T.sector3D.layerDraw.call(a.T,b.x,b.y,b.a+0.5,b.b+0.5,f,b.h,b.g,b.color)},a);a.processAnimation||c.sor(d,function(a,b){return 0>g((a.s+a.e)/2,1)-g((b.s+b.e)/2,1)});c.each(d,function(b){a.T.sector3D.sPaint.call(a.T,b.f.x,b.f.y,b.f.a,b.f.b,b.s,b.e,f,b.f.h,b.f.get("f_color"))},a);c.each(a.sectors,function(b){a.T.ellipse(b.x,b.y,b.a,b.b,b.get("startAngle"),b.get("endAngle"),b.get("f_color"),b.get("border.enable"),b.get("border.width"),b.get("border.color"),!1,!1,!0)},a)};a.components.push(a.proxy);a.one=c.emptyFn},doConfig:function(){c.Pie3D.superclass.doConfig.call(this);var a=this._(),b=c.angle2Radian(a.get("zRotate"));a.push("cylinder_height",a.get("yHeight")*a.push("zRotate_",Math.abs(Math.cos(b))));a.a=a.push("sub_option.semi_major_axis",a.r);a.b=a.push("sub_option.semi_minor_axis",a.r*Math.abs(Math.sin(b)));a.topY=a.push("sub_option.originy",a.get(a.Y)-a.get("yHeight")/2);a.parse(a);a.one(a)}});c.register("Pie3D");c.Donut2D=c.extend(c.Pie,{configure:function(){c.Donut2D.superclass.configure.call(this);this.type="donut2d";this.set({donutwidth:0.3,center:{text:"",line_height:24,fontweight:"bold",fontsize:24}})},doConfig:function(){c.Donut2D.superclass.doConfig.call(this);var a=this._(),b=a.get("donutwidth"),d=a.r;a.push("sub_option.radius",d);b>=d?b=0:1>b&&(b=Math.floor(d*b));a.push("sub_option.donutwidth",a.push("donutwidth",b));a.merge("center");""!=a.get("center.text")&&(a.push("center.originx",a.get(a.X)),a.push("center.originy",a.get(a.Y)),a.push("center.textBaseline","middle"),a.center=new c.Text(a.get("center"),a),a.oneways.push(a.center));a.parse(a)}});c.register("Donut2D");c.Column=c.extend(c.Chart,{configure:function(){c.Column.superclass.configure.call(this);this.type="column";this.set({coordinate:{},column_width:"66%",column_space:void 0,text_space:6,scaleAlign:"left",sub_option:{},label:{}});this.registerEvent();this.rectangles=[];this.labels=[];this.components.push(this.labels);this.components.push(this.rectangles)},toggle:function(a,b){var a=(a||0)%this.rectangles.length,c=this.rectangles[a],e=this.labels[a];"undefined"==typeof b&&(b=!e.get("actived"));c.push("actived",b);e.push("actived",b);this._draw()},doAnimation:function(a,b,d){var e;c.each(d.labels,function(a){a.draw()});c.each(d.rectangles,function(c){e=Math.ceil(d.animationArithmetic(a,0,c.height,b));c.push(d.Y,c.y+(c.height-e));c.push(d.H,e);c.drawRectangle()})},getCoordinate:function(){return this.coo},doLabel:function(a,b,d,e,f){a.labels.push(new c.Text(c.apply(a.get("label"),{id:b,text:d,originx:e,originy:f}),a))},doParse:function(a,b,c,e){a.doActing(a,b,e,c)},engine:function(a){if(!a.isE()){var b=a.get("column_width_"),c=a.get("column_space"),e=a.coo.getScale(a.get("scaleAlign")),f=a.coo.valid_height,g=b/2,h=b*(a.get("group_fator")||0),j="complex"!=a.dataType?b+c:a.data.length*b+c+(a.is3D()?(a.data.length-1)*h:0),k=a.coo.get("y_end"),m=k-e.basic*f-(a.is3D()?a.get("zHeight")*(a.get("bottom_scale")-1)/2*a.get("yAngle_"):0),n=c+a.coo.get("x_start"),k=k+a.get("text_space")+a.coo.get("axis.width")[2];a.doEngine(a,b,c,e,f,g,h,j,n,m,k)}},doConfig:function(){c.Column.superclass.doConfig.call(this);var a=this._();a.sub=a.is3D()?"Rectangle3D":"Rectangle2D";a.rectangles.length=0;a.labels.length=0;a.rectangles.zIndex=a.get("z_index");a.labels.zIndex=a.get("z_index")+1;a.coo=c.Coordinate.coordinate_.call(a,function(b){var d=a.data.length,e;"complex"==a.dataType?(e=a.get("labels").length,d=e*d+(a.is3D()?(d-1)*e*a.get("group_fator"):0),e+=1):("stacked"==a.dataType&&(d=a.get("labels").length),e=d+1);a.push("column_space",(b-a.push("sub_option.width",a.push("column_width_",c.parsePercent(a.get("column_width"),Math.floor(b/d))))*d)/e);a.is3D()&&(a.push("sub_option.zHeight",a.push("zHeight",a.get("column_width_")*a.get("zScale"))),a.push("sub_option.xAngle_",a.get("xAngle_")),a.push("sub_option.yAngle_",a.get("yAngle_")))})}});c.Column2D=c.extend(c.Column,{configure:function(){c.Column2D.superclass.configure.call(this);this.type="column2d"},doEngine:function(a,b,d,e,f,g,h,j,k,m,n){var p;c.each(a.data,function(b,d){p=(b.value-e.start)*f/e.distance;a.doParse(a,b,d,{id:d,originx:k+d*j,originy:m-(0<p?p:0),height:Math.abs(p)});a.rectangles.push(new c[a.sub](a.get("sub_option"),a));a.doLabel(a,d,b.name,k+j*d+g,n)},a)},doConfig:function(){c.Column2D.superclass.doConfig.call(this);this.engine(this)}});c.register("Column2D");c.Column3D=c.extend(c.Column2D,{configure:function(){c.Column3D.superclass.configure.call(this);this.type="column3d";this.dimension=c._3D;this.set({coordinate:{},xAngle:60,yAngle:20,zScale:1,bottom_scale:1.4})},doConfig:function(){c.Column3D.superclass.doConfig.call(this)}});c.register("Column3D");c.ColumnMulti2D=c.extend(c.Column,{configure:function(){c.ColumnMulti2D.superclass.configure.call(this);this.type="columnmulti2d";this.dataType="complex";this.set({labels:[]})},doEngine:function(a,b,d,e,f,g,h,j,k,m,n){var p;c.each(a.columns,function(g,r){c.each(g.item,function(d,g){p=(d.value-e.start)*f/e.distance;a.doParse(a,d,r+"_"+g,{id:r+"_"+g,originx:k+g*(b+h)+r*j,originy:m-(0<p?p:0),height:Math.abs(p)});a.rectangles.push(new c[a.sub](a.get("sub_option"),a))},a);a.doLabel(a,r,g.name,k-0.5*d+(r+0.5)*j,n)},a)},doConfig:function(){c.ColumnMulti2D.superclass.doConfig.call(this);this.engine(this)}});c.register("ColumnMulti2D");c.ColumnMulti3D=c.extend(c.ColumnMulti2D,{configure:function(){c.ColumnMulti3D.superclass.configure.call(this);this.type="columnmulti3d";this.dataType="complex";this.dimension=c._3D;this.set({xAngle:60,yAngle:20,zScale:1,group_fator:0.3,bottom_scale:1.4})},doConfig:function(){c.ColumnMulti3D.superclass.doConfig.call(this)}});c.register("ColumnMulti3D");c.ColumnStacked2D=c.extend(c.Column,{configure:function(){c.ColumnStacked2D.superclass.configure.call(this);this.type="columnstacked2d";this.dataType="stacked";this.set({percent:!1,labels:[],sub_option:{label:{color:"#ffffff"},valueAlign:"middle"}})},doEngine:function(a,b,d,e,f,g,h,j,k,m,n){var p,l,r,v=a.get("percent");c.each(a.columns,function(b,g){p=0;r=v?100/b.total:1;c.each(b.item,function(d,h){l=(d.value*r-e.start)*f/e.distance;d.total=b.total;a.doParse(a,d,g+"_"+h,{id:g+"_"+h,originx:k+g*j,originy:m-(0<l?l:0)-p,height:Math.abs(l)});p+=l;a.rectangles.push(new c[a.sub](a.get("sub_option"),a))},a);a.doLabel(a,g,b.name,k-0.5*d+(g+0.5)*j,n)},a)},doConfig:function(){c.ColumnStacked2D.superclass.doConfig.call(this);this.engine(this)}});c.register("ColumnStacked2D");c.ColumnStacked3D=c.extend(c.ColumnStacked2D,{configure:function(){c.ColumnStacked3D.superclass.configure.call(this);this.type="columnstacked3d";this.dataType="stacked";this.dimension=c._3D;this.set({percent:!1,sub_option:{label:{color:"#ffffff"},valueAlign:"middle"},coordinate:{},xAngle:60,yAngle:20,zScale:1,bottom_scale:1.4})},doConfig:function(){c.ColumnStacked3D.superclass.doConfig.call(this)}});c.register("ColumnStacked3D");c.Bar=c.extend(c.Chart,{configure:function(){c.Bar.superclass.configure.call(this);this.type="bar";this.set({coordinate:{striped_direction:"h"},bar_height:"66%",bar_space:void 0,text_space:6,scaleAlign:"bottom",sub_option:{},label:{}});this.rectangles=[];this.labels=[];this.components.push(this.labels);this.components.push(this.rectangles)},getCoordinate:function(){return this.coo},doLabel:function(a,b,d,e,f){a.labels.push(new c.Text(c.apply(a.get("label"),{id:b,text:d,textAlign:"right",textBaseline:"middle",originx:e,originy:f}),a))},doParse:function(a,b,c,e){a.doActing(a,b,e,c)},engine:function(a){if(!a.isE()){var b=a.get("_bar_height"),c=a.get("bar_space"),e=a.coo.getScale(a.get("scaleAlign")),f=a.coo.valid_width,g=b/2,h="complex"!=a.dataType?b+c:a.data.length*b+c,j=a.coo.get("x_start")+e.basic*f,k=a.coo.get(a.X)-a.get("text_space")-a.coo.get("axis.width")[3],m=a.coo.get("y_start")+c;a.doEngine(a,b,c,e,f,g,h,j,k,m)}},doAnimation:function(a,b,d){c.each(d.labels,function(a){a.draw()});c.each(d.rectangles,function(c){c.push(d.W,Math.ceil(d.animationArithmetic(a,0,c.width,b)));c.drawRectangle()})},doConfig:function(){c.Bar.superclass.doConfig.call(this);var a=this._();a.rectangles.length=0;a.labels.length=0;a.rectangles.zIndex=a.get("z_index");a.labels.zIndex=a.get("z_index")+1;a.coo=c.Coordinate.coordinate_.call(a,function(b,d){var e=a.data.length,f;"complex"==a.dataType?(f=a.get("labels").length,e=f*e+(a.is3D()?(e-1)*f*a.get("group_fator"):0),f+=1):("stacked"==a.dataType&&(e=a.get("labels").length),f=e+1);a.push("bar_space",(d-a.push("sub_option.height",a.push("_bar_height",c.parsePercent(a.get("bar_height"),Math.floor(d/e))))*e)/f)});a.push("sub_option.valueAlign",a.R);a.push("sub_option.tipAlign",a.R)}});c.Bar2D=c.extend(c.Bar,{configure:function(){c.Bar2D.superclass.configure.call(this);this.type="bar2d"},doEngine:function(a,b,d,e,f,g,h,j,k,m){var n;c.each(a.data,function(b,d){n=(b.value-e.start)*f/e.distance;a.doParse(a,b,d,{id:d,originy:m+d*h,width:Math.abs(n),originx:j+(0<n?0:-Math.abs(n))});a.rectangles.push(new c.Rectangle2D(a.get("sub_option"),a));a.doLabel(a,d,b.name,k,m+d*h+g)},a)},doConfig:function(){c.Bar2D.superclass.doConfig.call(this);this.engine(this)}});c.register("Bar2D");c.BarMulti2D=c.extend(c.Bar,{configure:function(){c.BarMulti2D.superclass.configure.call(this);this.type="barmulti2d";this.dataType="complex";this.set({labels:[]})},doEngine:function(a,b,d,e,f,g,h,j,k,m){var n;c.each(a.columns,function(g,l){c.each(g.item,function(d,g){n=(d.value-e.start)*f/e.distance;a.doParse(a,d,g,{id:l+"_"+g,originy:m+g*b+l*h,width:Math.abs(n),originx:j+(0<n?0:-Math.abs(n))});a.rectangles.push(new c.Rectangle2D(a.get("sub_option"),a))},a);a.doLabel(a,l,g.name,k,m-0.5*d+(l+0.5)*h)},a)},doConfig:function(){c.BarMulti2D.superclass.doConfig.call(this);this.engine(this)}});c.register("BarMulti2D");c.BarStacked2D=c.extend(c.Bar,{configure:function(){c.BarStacked2D.superclass.configure.call(this);this.type="barstacked2d";this.dataType="stacked";this.set({percent:!1,labels:[],sub_option:{label:{color:"#ffffff"},valueAlign:"middle"}})},doEngine:function(a,b,d,e,f,g,h,j,k,m){var n,p,l,r=a.get("percent");c.each(a.columns,function(b,g){n=0;l=r?100/b.total:1;c.each(b.item,function(d,i){p=(d.value*l-e.start)*f/e.distance;d.total=b.total;a.doParse(a,d,i,{id:g+"_"+i,originy:m+g*h,originx:j+(0<p?0:-Math.abs(p))+n,width:Math.abs(p)});n+=p;a.rectangles.push(new c.Rectangle2D(a.get("sub_option"),a))},a);a.doLabel(a,g,b.name,k,m-0.5*d+(g+0.5)*h)},a)},doConfig:function(){c.BarStacked2D.superclass.doConfig.call(this);this.push("sub_option.valueAlign",this.C);this.engine(this)}});c.register("BarStacked2D");c.LineSegment=c.extend(c.Component,{configure:function(){c.LineSegment.superclass.configure.apply(this,arguments);this.type="linesegment";this.set({brushsize:1,intersection:!0,label:{},sign:"round",area_color:null,actived:!0,hollow:!0,hollow_inside:!0,hollow_color:"#FEFEFE",smooth:!1,smoothing:1.5,point_size:6,points:[],keep_with_coordinate:!1,shadow_blur:1,shadow_offsety:1,point_space:0,coordinate:null,event_range_x:0,limit_y:!1,tip_offset:2,event_range_y:0});this.registerEvent("parseText");this.tip=null},drawSegment:function(){var a=this._();c.each(a.polygons,function(b){a.T.polygon.apply(a.T,b)});a.T.shadowOn(a.get("shadow"));c.each(a.lines,function(b){a.T.lineArray.apply(a.T,b)});c.each(a.intersections,function(b){a.sign_plugin?a.sign_plugin_fn.apply(a,b):a.T.round0.apply(a.T,b)});a.get("shadow")&&a.T.shadowOff()},doDraw:function(a){a.get("actived")&&(a.drawSegment(),a.get("label")&&c.each(a.labels,function(a){a.draw()}))},isEventValid:function(){},tipInvoke:function(){var a=this.x,b=this.get("tip_offset"),c=this.get("point_size")+b,e=this;return function(f,g,h){var j=h.left,h=h.top,j=3>e.tipPosition&&0<j-f-a-b||2<e.tipPosition&&0>j-f-a-b?j-(f+b):j+b,h=0==e.tipPosition%2?h+c:h-g-c;return{left:j,top:h}}},PP:function(a,b,c,e,f,g){a.get("area")&&a.polygons.push([a.tf("area_color")||a.get("light_color2"),0,a.get("brushsize"),0,0,a.get("area_opacity"),a.get("smooth")?b:[{x:c,y:e}].concat(b.concat([{x:f,y:g}])),a.get("smooth"),a.get("smoothing")||1.5,[{x:c,y:e},{x:f,y:g}]])},parse:function(a){a.polygons=[];a.lines=[];a.intersections=[];a.labels=[];var b=a.get("points"),d=a.get("intersection"),e=!!a.get("label"),f=[],g=!1,h=a.get("smooth"),j=a.get("smoothing")||1.5,k=a.get("f_color"),m=a.get("brushsize"),n=a.get("point_size");if(d){var p=a.getPlugin("sign"),l=k,r=a.get("hollow_color");a.sign_plugin=c.isFunction(p);a.sign_plugin_fn=p;a.get("hollow_inside")&&(l=r,r=k)}c.each(b,function(b){b.x_=b.x;b.y_=b.y;!b.ignored&&!b.direct&&e&&(a.push("label.originx",b.x),a.push("label.originy",b.y-n/2-1),a.push("label.text",a.fireString(a,"parseText",[a,b.value],b.value)),c.applyIf(a.get("label"),{textBaseline:"bottom",color:a.get("f_color")}),a.labels.push(new c.Text(a.get("label"),a)));b.ignored&&g?(a.lines.push([f,m,k,h,j]),a.PP(a,f,f[0].x,a.y,f[f.length-1].x,a.y),f=[],g=!1):!b.ignored&&!b.direct&&(f.push(b),g=!0);d&&!b.ignored&&!b.direct&&a.intersections.push(a.sign_plugin?[a.T,a.get("sign"),b,n,b.color||l,b.hollow_color||r]:a.get("hollow")?[b,n/2-m+1,b.color||l,m+1,b.hollow_color||r]:[b,n/2,b.color||l])});f.length&&(a.lines.push([f,m,k,h,j]),a.PP(a,f,f[0].x,a.y,f[f.length-1].x,a.y))},doConfig:function(){c.LineSegment.superclass.doConfig.call(this);var a=this._(),b=3*a.get("point_size")/2,d=a.get("point_space"),e=a.get("event_range_y"),f=a.get("event_range_x"),g=a.get("tipInvokeHeap"),h=a.get("points"),j=a.get("name");c.Assert.isTrue(0<d,"point_space");a.parse(a);if(0>=f||f>d/2)f=a.push("event_range_x",d/2);0==e&&(e=a.push("event_range_y",b/2));a.get("tip.enable")&&(a.on("mouseover",function(){g.push(a);a.tipPosition=g.length}).on("mouseout",function(){g.pop()}),a.push("tip.invokeOffsetDynamic",!0),a.tip=new c.Tip(a.get("tip"),a));var k=a.get("coordinate"),m=a.get("limit_y"),n=a.get("keep_with_coordinate"),p=function(a,b,c){return!a.ignored&&Math.abs(b-a.x)<f&&(!m||m&&Math.abs(c-a.y)<e)?true:false},l=function(a){return{valid:true,name:j,value:h[a].value,text:h[a].text,top:h[a].y,left:h[a].x,i:a,hit:true}};a.isEventValid=function(b){if(!a.get("actived")||k&&!k.isEventValid(b,k).valid)return{valid:false};var e=Math.floor((b.x-a.x)/d);if(e<0||e>=h.length-1){e=c.between(0,h.length-1,e);return p(h[e],b.x,b.y)?l(e):{valid:n}}for(var f=e;f<=e+1;f++)if(p(h[f],b.x,b.y))return l(f);return{valid:n}}}});c.Line=c.extend(c.Chart,{configure:function(){c.Line.superclass.configure.call(this);this.type="line";this.set({nullToDirect:!0,brushsize:1,coordinate:{axis:{width:[0,0,2,2]}},crosshair:{enable:!1},tipMocker:null,tipMockerOffset:null,scaleAlign:"left",labelAlign:"bottom",labels:[],label_space:6,proportional_spacing:!0,sub_option:{},legend:{sign:"bar"},label:{}});this.registerEvent("parsePoint");this.lines=[];this.components.push(this.lines);this.on("resize",function(){this.push("point_space",0)})},load:function(a,b){for(var d=this.get("coordinate.scale"),e=0;b&&e<d.length;e++)d[e].position==this.get("labelAlign")&&(d[e].labels=b);this.push("point_space",0);c.Line.superclass.load.call(this,a)},toggle:function(a,b){var c=this.lines[(a||0)%this.lines.length];"undefined"==typeof b&&(b=!c.get("actived"));c.push("actived",b);this._draw()},getCoordinate:function(){return this.coo},doConfig:function(){c.Line.superclass.doConfig.call(this);var a=this._(),b=1>=a.data.length;a.lines.length=0;a.lines.zIndex=a.get("z_index");var d=a.pushIf("sub_option.keep_with_coordinate",b);a.get("crosshair.enable")&&(a.pushIf("crosshair.hcross",b),a.pushIf("crosshair.invokeOffset",function(b){b=a.lines[0].isEventValid(b);return b.valid?b:d}));a.Combination||(a.push("coordinate.crosshair",a.get("crosshair")),a.pushIf("coordinate.scale",[{position:a.get("scaleAlign"),max_scale:a.get("maxValue")},{position:a.get("labelAlign"),start_scale:1,scale:1,end_scale:a.get("maxItemSize"),labels:a.get("labels"),label:a.get("label")}]));a.coo=c.Coordinate.coordinate_.call(a);a.Combination&&(a.coo.push("crosshair",a.get("crosshair")),a.coo.doCrosshair(a.coo));if(!a.isE()){var e=b=a.coo.valid_width,f=a.get("maxItemSize")-1,g=f?b/f:b,h=a.get("point_space");a.get("proportional_spacing")&&(h&&h<g?e=f*h:a.push("point_space",g));a.push("sub_option.width",e);a.push("sub_option.height",a.coo.valid_height);a.push("sub_option.originx",a.coo.get("x_start")+(b-e)/2);a.push("sub_option.originy",a.coo.get("y_end"));if(a.get("tip.enable")&&!a.mocker&&c.isFunction(a.get("tipMocker"))){a.push("sub_option.tip.enable",!1);a.push("tip.invokeOffsetDynamic",!0);var j,k=a.coo.get(a.X),m=a.coo.get(a.Y),n=a.coo.height,p=a.get("tipMockerOffset"),l,r,v,p=c.isNumber(p)?0>p?0:1<p?1:p:null;a.push("tip.invokeOffset",function(a,b,c){if(p!=null)c.top=m+(n-b)*p;else{c.top=c.maxTop-(c.maxTop-c.minTop)/3-b;if(b>n||m>c.top)c.top=m}return{left:c.left-a-k>5?c.left-a-5:c.left+5,top:c.top}});var s=a.get("tip.listeners.parseText");s&&delete a.get("tip.listeners").parseText;a.mocker=new c.Custom({eventValid:function(b){r=a.lines[0].isEventValid(b);r.hit=l!=r.i;if(r.valid){l=r.i;j=[];c.each(a.lines,function(a,c){v=a.isEventValid(b);if(c==0)r.minTop=r.maxTop=v.top;else{r.minTop=Math.min(r.minTop,v.top);r.maxTop=Math.max(r.maxTop,v.top)}j.push(s?s(a,v.name,v.value,v.text,v.i):v.name+" "+v.value)});r.text=a.get("tipMocker").call(a,j,r.i)}return r.valid?r:false}});new c.Tip(a.get("tip"),a.mocker);a.register(a.mocker)}a.pushIf("sub_option.area_opacity",a.get("area_opacity"))}}});c.LineBasic2D=c.extend(c.Line,{configure:function(){c.LineBasic2D.superclass.configure.call(this);this.type="basicline2d";this.tipInvokeHeap=[]},doAnimation:function(a,b,d){c.each(d.lines,function(e){c.each(e.get("points"),function(c){c.y=e.y-Math.ceil(d.animationArithmetic(a,0,e.y-c.y_,b))});e.drawSegment()})},doConfig:function(){c.LineBasic2D.superclass.doConfig.call(this);var a=this._();if(!a.isE()){var b,d=a.coo.valid_height,e=a.get("point_space"),f,g,h,j=a.get("sub_option.originx"),k,m,n=a.get("nullToDirect");a.push("sub_option.tip.showType","follow");a.push("sub_option.coordinate",a.coo);a.push("sub_option.tipInvokeHeap",a.tipInvokeHeap);a.push("sub_option.point_space",e);c.each(a.data,function(p){b=a.coo.getScale(p.scaleAlign||a.get("scaleAlign"));k=a.get("sub_option.originy")-b.basic*d;f=[];c.each(p.value,function(l,r){null!=l?(g=e*r,h=(l-b.start)*d/b.distance,m={x:j+g,y:k-h,value:l,text:p.name+" "+l},c.merge(m,a.fireEvent(a,"parsePoint",[p,l,g,h,r,b])),f.push(m)):f.push({ignored:!n,direct:n})},a);c.merge(a.get("sub_option"),p);a.push("sub_option.points",f);a.push("sub_option.brushsize",p.linewidth||p.line_width);a.lines.push(new c.LineSegment(a.get("sub_option"),a))},this)}}});c.register("LineBasic2D");c.Area2D=c.extend(c.LineBasic2D,{configure:function(){c.Area2D.superclass.configure.call(this);this.type="area2d";this.set({area_opacity:0.3})},doConfig:function(){this.push("sub_option.area",!0);c.Area2D.superclass.doConfig.call(this)}});c.register("Area2D")})(iChart);